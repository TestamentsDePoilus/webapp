(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(e,t,a){},177:function(e,t,a){},200:function(e,t,a){},346:function(e,t,a){e.exports=a(625)},351:function(e,t,a){},467:function(e,t,a){},625:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),i=a.n(l),o=(a(351),a(200),a(16)),s=a(79),c=a(8),m=a(9),u=a(11),d=a(10),p=a(7),h=a(12),g=a(680),f=a(70),E=a(678),y=a(701),b=a(671),v=a(670),k=a(302),C=a(681),S=a(702),w=a(673),_=a(628),j=a(674),x=a(51),O=a.n(x),N=a(89),I=a(98),A=a(5),L=a.n(A),P=a(4),T=a(90),W=a.n(T),D=a(115),B=a.n(D);function M(){var e=sessionStorage.usertoken;return e?B()(e):null}function F(e){var t={es_host:"http://127.0.0.1:9200",es_index_wills:"tdp_wills",es_index_cms:"tdp_cms",es_index_user:"tdp_users",web_url:"http://127.0.0.1/testaments-de-poilus",web_host:"http://127.0.0.1/testaments-de-poilus"};return t[e]}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new XMLHttpRequest;return r.open(t,e,n),r.setRequestHeader("Content-type","application/json"),r.send(a),200===r.status?r.responseText:null}function z(e){return JSON.parse(R(e+"/_search?filter_path=hits.total")).hits.total}function U(e,t){return JSON.parse(R(e+"/_search?pretty","POST",t)).hits.hits}function q(e,t){function a(e){return(0,e.children)(Object(I.a)(e,["children"]))}return a.propTypes={children:L.a.func.isRequired,classes:L.a.object.isRequired},Object(P.a)(e,t)(a)}function H(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var Q=function(){var e=Object(N.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F("web_host"),e.next=4,W.a.post(a+"/users/register",{email:t.email,user_name:t.user_name,password:t.password});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log("error rester :",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(N.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F("web_host"),e.next=4,W.a.post(a+"/users/login",{email:t.email,password:t.password});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(N.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F("web_host"),e.next=4,W.a.post(a+"/cms/publish",{title:t.title,summary:t.summary,detail:t.detail,type:t.type,author:t.author});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(N.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F("web_host"),e.next=4,W.a.post(a+"/cms/removePost",{ids:t});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(N.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F("web_host"),e.next=4,W.a.post(a+"/cms/updatePost",{id:t.id,title:t.title,summary:t.summary,detail:t.detail,type:t.type,author:t.author});case 4:return n=e.sent,console.log("res :",n),e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(N.a)(O.a.mark(function e(t){var a,n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=F("web_host"),e.next=4,W.a.post(a+"/users/updateMyListWills",{email:t.email,myWills:t.myWills});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log("err dans catch :",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),$=a(14),K=a.n($),Y=a(189),ee=a.n(Y),te=a(86),ae=a.n(te),ne=a(164),re=a(28),le=a(662),ie=a(699),oe=a(667),se=a(668),ce=a(669),me=q(function(e){return{paper:{margin:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},textField:{margin:e.spacing(1,0,1)},errorText:{color:"#ab003c",fontSize:14,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}}),ue=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleClickShowPassword=function(){e.setState({showPassword:!e.state.showPassword})},e.state={email:"",password:"",error:"",showPassword:!1,mailError:!1,passError:!1},e.onChange=e.onChange.bind(Object(p.a)(e)),e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e.handleClickShowPassword=e.handleClickShowPassword.bind(Object(p.a)(e)),e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"mailError",!1),Object(re.a)(t,"passError",!1),t))}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.email&&this.state.password){var a={email:this.state.email,password:this.state.password};V(a).then(function(e){if(200===e.status){sessionStorage.setItem("usertoken",e.res);var a=M();sessionStorage.setItem("myWills",a.myWills),document.location.reload(!0)}else{var n=e.error?e.error:"Connexion au serveur a \xe9chou\xe9 !";t.setState({error:n})}})}else this.state.email||this.state.password?this.state.email?this.setState({error:"Saisissez  le mot de passe !",mailError:!1,passError:!0}):this.setState({error:"Saisissez l'adresse e-mail !",mailError:!0,passError:!1}):this.setState({error:"Saisissez l'adresse e-mail et le mot de passe !",mailError:!0,passError:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(me,null,function(t){var a=t.classes;return r.a.createElement(le.a,{maxWidth:"xs"},r.a.createElement("div",{className:a.paper},""!==e.state.error?r.a.createElement(f.a,{className:a.errorText},"Erreur : ",e.state.error):"",r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:e.onSubmit},r.a.createElement(ie.a,{id:"email",variant:"outlined",className:a.textField,required:!0,fullWidth:!0,label:"Adresse email",type:"email",name:"email",autoComplete:"email",autoFocus:!0,value:e.state.email,onChange:e.onChange,error:e.state.mailError}),r.a.createElement(ie.a,{id:"password",variant:"outlined",className:a.textField,required:!0,fullWidth:!0,label:"Mots de passe",type:e.state.showPassword?"text":"password",name:"password",autoComplete:"current-password",value:e.state.password,onChange:e.onChange,error:e.state.passError,InputProps:{endAdornment:r.a.createElement(oe.a,{position:"end"},r.a.createElement(_.a,{"aria-label":"Toggle password visibility",onClick:e.handleClickShowPassword},e.state.showPassword?r.a.createElement(se.a,null):r.a.createElement(ce.a,null)))}}),r.a.createElement(v.a,{id:"btLogin",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,type:"submit"},"Se connecter"),r.a.createElement(b.a,{href:"#",variant:"body2"},"Mot de passe oubli\xe9 ?"))))})}}]),t}(n.Component),de=a(672),pe=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={mess:"Un mail de confirmation vous a \xe9t\xe9 envoy\xe9 !"},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Confirmation"),r.a.createElement("h5",null,this.state.mess))}}]),t}(n.Component),he=q(function(e){return{paper:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},textField:{margin:e.spacing(1,0,1)},submit:{margin:e.spacing(3,0,2)},showIcon:{margin:e.spacing(1)},errorText:{color:"#ab003c",fontSize:14,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}}),ge=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleClickShowPassword=function(t){e.setState({showPassword:!e.state.showPassword})},e.state={user_name:"",email:"",password:"",passConfirme:"",showPassword:!1,error:"",isError:[!1,!1,!1,!1],open:!1},e.onChange=e.onChange.bind(Object(p.a)(e)),e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e.handleClickShowPassword=e.handleClickShowPassword.bind(Object(p.a)(e)),e.handleClose=e.handleClose.bind(Object(p.a)(e)),e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",""),t))}},{key:"handleClose",value:function(){window.location.replace(F("web_url")+"/login")}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.user_name&&this.state.email)if(this.state.password)if(this.state.password!==this.state.passConfirme)this.setState({error:"Les mots de passe saisies ne sont pas identiques",isError:[!1,!1,!0,!0]});else{var a={user_name:this.state.user_name,email:this.state.email,password:this.state.password};Q(a).then(function(e){if(200===e.status)t.setState({open:!0});else{console.log("error register :",e);var a=e.err?e.err:"Connexion au serveur a \xe9chou\xe9 !";t.setState({error:a})}})}else this.setState({error:"Saisissez votre mot de passe !",isError:[!1,!1,!0,!0]});else this.state.user_name||this.state.email?this.state.user_name?this.setState({error:"Saisissez votre adresse e-mail !",isError:[!1,!0,!1,!1]}):this.setState({error:"Saisissez votre pseudo !",isError:[!0,!1,!1,!1]}):this.setState({error:"Saisissez votre pseudo et votre adresse e-mail !",isError:[!0,!0,!1,!1]})}},{key:"render",value:function(){var e=this;return r.a.createElement(he,null,function(t){var a=t.classes;return r.a.createElement(le.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:a.paper},r.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:e.onSubmit,autoComplete:"off"},r.a.createElement(ie.a,{id:"standard-userName-input",variant:"outlined",className:a.textField,required:!0,fullWidth:!0,autoFocus:!0,label:"Mon pseudo",name:"user_name",onChange:e.onChange,value:e.state.user_name,error:e.state.isError[0]}),r.a.createElement(ie.a,{id:"standard-email-input",variant:"outlined",required:!0,fullWidth:!0,className:a.textField,label:"Adresse email",type:"email",name:"email",autoComplete:"email",onChange:e.onChange,value:e.state.email,error:e.state.isError[1]}),r.a.createElement(de.a,{container:!0,alignItems:"center",justify:"space-evenly",spacing:1},r.a.createElement(de.a,{item:!0,xs:!0},r.a.createElement(ie.a,{id:"password",variant:"outlined",required:!0,fullWidth:!0,label:"Mot de passe",type:e.state.showPassword?"text":"password",name:"password",autoComplete:"current-password",onChange:e.onChange,value:e.state.password,error:e.state.isError[2]})),r.a.createElement(de.a,{item:!0,xs:!0},r.a.createElement(ie.a,{id:"password-confirme",variant:"outlined",required:!0,fullWidth:!0,label:"Confirmation",type:e.state.showPassword?"text":"password",name:"passConfirme",autoComplete:"current-password",onChange:e.onChange,value:e.state.passConfirme,error:e.state.isError[3]})," "),r.a.createElement(de.a,{item:!0,xs:1},r.a.createElement(oe.a,{position:"end"},r.a.createElement(_.a,{"aria-label":"Toggle password visibility",onClick:e.handleClickShowPassword},e.state.showPassword?r.a.createElement(se.a,null):r.a.createElement(ce.a,null))))),r.a.createElement(v.a,{variant:"contained",fullWidth:!0,color:"primary",className:a.submit,type:"submit"},"S'inscrire")),e.state.error?r.a.createElement(f.a,{className:a.errorText},e.state.error):"",r.a.createElement(S.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:e.state.open,onClose:e.handleClose},r.a.createElement(w.a,{id:"customized-dialog-title"},r.a.createElement(_.a,{"aria-label":"close",className:a.closeButton,onClick:e.handleClose},r.a.createElement(ae.a,null))),r.a.createElement(j.a,null,r.a.createElement(pe,null)))))})}}]),t}(n.Component),fe=a(696),Ee=a(676),ye=a(697),be=a(679),ve=a(285),ke=a.n(ve),Ce=a(675),Se=a(33),we=a(677);function _e(e){var t=e.children,a=e.value,n=e.index,l=Object(I.a)(e,["children","value","index"]);return r.a.createElement(f.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),r.a.createElement(fe.a,{p:3},t))}function je(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var xe=Object(Ce.a)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500,marginLeft:"auto",marginRight:"auto",marginTop:e.spacing(2)},avatar:{marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing(5),backgroundColor:e.palette.primary.main}}});function Oe(){var e=xe(),t=Object(Se.a)(),a=r.a.useState(1),n=Object(ne.a)(a,2),l=n[0],i=n[1];return sessionStorage.usertoken?r.a.createElement("div",{className:e.root}," Vous \xeates connect\xe9"):r.a.createElement("div",{className:e.root},r.a.createElement(Ee.a,{className:e.avatar},r.a.createElement(we.a,null)),r.a.createElement(E.a,{position:"static",color:"default"},r.a.createElement(ye.a,{value:l,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},r.a.createElement(be.a,Object.assign({label:"Inscription"},je(0))),r.a.createElement(be.a,Object.assign({label:"Connexion"},je(1))))),r.a.createElement(ke.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:l,onChangeIndex:function(e){i(e)}},r.a.createElement(_e,{value:l,index:0,dir:t.direction},r.a.createElement(ge,null)),r.a.createElement(_e,{value:l,index:1,dir:t.direction},r.a.createElement(ue,null))))}var Ne=a(154),Ie=a.n(Ne),Ae=q(function(e){return{nav_root:{height:130,marginTop:10,background:"#eceff1",color:"white",position:"static",flexGrow:1},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontSize:18,fontWeight:500,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600},menu:{paddingLeft:"10%",paddingTop:45},typography:{color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.9)",fontSize:28,fontWeight:500,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},logIn:{margin:e.spacing(1),position:"absolute",right:"5%",marginTop:50},logTitle:{color:"#1769aa",fontSize:16,fontWeight:600,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}),Le=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={selectedId:"search",open:!1,anchorEl:null,anchorElExplor:null},e.handleListItemClick=e.handleListItemClick.bind(Object(p.a)(e)),e.tabLinks=["search","wills","about","testators","places","news","units"],e.handleLoginClick=e.handleLoginClick.bind(Object(p.a)(e)),e.handleLogoutClick=e.handleLogoutClick.bind(Object(p.a)(e)),e.handleClose=e.handleClose.bind(Object(p.a)(e)),e.handleMenuClick=e.handleMenuClick.bind(Object(p.a)(e)),e.handleMenuClose=e.handleMenuClose.bind(Object(p.a)(e)),e.handleExplorClick=e.handleExplorClick.bind(Object(p.a)(e)),e.handleExplorClose=e.handleExplorClose.bind(Object(p.a)(e)),e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleListItemClick",value:function(e){this.setState({selectedId:e.target.id})}},{key:"handleLoginClick",value:function(e){this.setState({open:!0})}},{key:"handleLogoutClick",value:function(e){sessionStorage.removeItem("usertoken"),document.location.reload()}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleMenuClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleMenuClose",value:function(){this.setState({anchorEl:null})}},{key:"handleExplorClick",value:function(e){this.setState({anchorElExplor:e.currentTarget})}},{key:"handleExplorClose",value:function(){this.setState({anchorElExplor:null})}},{key:"componentDidMount",value:function(){var e=this.tabLinks.find(function(e){return document.location.href.includes(e)});this.setState({selectedId:e})}},{key:"render",value:function(){var e=this,t=r.a.createElement(Ae,null,function(t){var a=t.classes;return r.a.createElement("div",null,r.a.createElement(g.a,{id:"btLogin",color:"primary","aria-label":"Login",onClick:e.handleLoginClick},r.a.createElement(ee.a,null)),r.a.createElement(f.a,{className:a.logTitle},"CONNEXION"))}),a=r.a.createElement(Ae,null,function(t){var a=t.classes;return r.a.createElement("div",null,r.a.createElement(g.a,{id:"btLogout",color:"secondary","aria-label":"Logout",onClick:e.handleLogoutClick},r.a.createElement(ee.a,null)),r.a.createElement(f.a,{className:a.logTitle},"DECONNEXION"))});return r.a.createElement(Ae,null,function(n){var l=n.classes;return r.a.createElement("div",null,r.a.createElement(E.a,{className:K()(l.nav_root)},r.a.createElement("div",{className:"logo"},r.a.createElement(f.a,{className:l.typography},"Testaments de Poilus")),r.a.createElement(y.a,{"aria-label":"Breadcrumb",className:l.menu},r.a.createElement(b.a,{id:"search",className:"search"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/search"}," ","Recherche"," "),r.a.createElement("div",null,r.a.createElement(v.a,{className:K()(l.link),onClick:e.handleExplorClick},"Explorer",r.a.createElement(Ie.a,{className:K()(l.icon)})),r.a.createElement(k.a,{id:"simple-menu-explor",anchorEl:e.state.anchorElExplor,keepMounted:!0,open:Boolean(e.state.anchorElExplor),onClose:e.handleExplorClose},r.a.createElement(C.a,{onClick:e.handleExplorClose}," ",r.a.createElement(b.a,{id:"wills",className:"wills"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/wills",onClick:e.handleListItemClick},"Les testaments")),r.a.createElement(C.a,{onClick:e.handleExplorClose},r.a.createElement(b.a,{id:"testators",className:"testators"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/testators",onClick:e.handleListItemClick},"Les testateurs")),r.a.createElement(C.a,{onClick:e.handleExplorClose},r.a.createElement(b.a,{id:"places",className:"places"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/places",onClick:e.handleListItemClick},"Les lieux")),r.a.createElement(C.a,{onClick:e.handleExplorClose},r.a.createElement(b.a,{id:"units",className:"units"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/units",onClick:e.handleListItemClick},"Les unit\xe9s militaires")))),r.a.createElement(b.a,{id:"news",className:"news"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/news"}," ","Les actualit\xe9s"," "),r.a.createElement(b.a,{id:"articles",className:"articles"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/articles"}," ","L'\xe9tat de l'art"," "),r.a.createElement(b.a,{id:"about",className:"about"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/about"}," ","A propos"," "),sessionStorage.usertoken?r.a.createElement(b.a,{id:"mySpace",className:"mySpace"===e.state.selectedId?K()(l.link,l.activedLink):l.link,component:o.b,to:"/espace"}," ","Mon espace"," "):null),r.a.createElement("div",{className:l.logIn},sessionStorage.usertoken?a:t)),r.a.createElement(S.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!sessionStorage.usertoken&&e.state.open,onClose:e.handleClose},r.a.createElement(w.a,{id:"customized-dialog-title",onClose:e.handleClose},r.a.createElement(_.a,{"aria-label":"close",className:l.closeButton,onClick:e.handleClose},r.a.createElement(ae.a,null))),r.a.createElement(j.a,null,r.a.createElement(Oe,null))))})}}]),t}(n.Component),Pe=Object(s.e)(Le),Te=(a(170),a(19)),We=function(){return r.a.createElement(Te.c,{react:{and:["mainSearch","cote","testatorSearch","date","institution"]},componentId:"contributors",dataField:"contributions.persName.keyword",nestedField:"contributions",title:"Contributeurs",sortBy:"count",queryFormat:"and",URLParams:!0,showCheckbox:!1,showSearch:!0,className:"contributors",innerClass:{list:"list"},placeholder:"Nom du contributeur",filterLabel:"contributeurs"})},De=function(){return r.a.createElement(Te.h,{react:{and:["mainSearch","cote","testatorSearch","date","contributors"]},componentId:"institution",dataField:"will_identifier.institution.keyword",title:"Institution de conservation",sortBy:"count",URLParams:!0,showCount:!0,showSearch:!1,className:"contributors",filterLabel:"Institution"})},Be=a(704),Me=a(298),Fe=a.n(Me),Re=a(157),ze=a.n(Re),Ue=a(91),qe=a.n(Ue),He=(a(465),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).map=null,a.markers=qe.a.markerClusterGroup(),a.state={curData:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.markers.clearLayers(),this.state.curData.forEach(function(t,a){if(void 0!==t["will_contents.will_place"]){var n=qe.a.marker(t["will_contents.will_place"]);n.bindPopup(t["will_identifier.name"]),e.markers.addLayer(n)}}),this.map.addLayer(this.markers)}},{key:"componentDidMount",value:function(){var e=this;this.map=qe.a.map(i.a.findDOMNode(this)).setView([47.0780911,2.3631982],5),qe.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors"}).addTo(this.map);var t=qe.a.markerClusterGroup();this.state.curData.forEach(function(a,n){if(void 0!==a.will_place){var r=qe.a.marker(a.will_place);r.bindPopup(a.will_name),t.addLayer(r),e.markers.push(r)}}),this.map.addLayer(t)}},{key:"componentWillUnmount",value:function(){this.map&&(this.map=null)}},{key:"render",value:function(){return r.a.createElement("div",{className:"map-container"})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.data!==t.curData&&void 0!==e.data?{curData:e.data}:null}}]),t}(r.a.Component)),Qe=a(47),Ve=a.n(Qe),Je=a(303),Xe=a(102),Ze=a.n(Xe),Ge=a(103),$e=a.n(Ge),Ke=a(104),Ye=a.n(Ke),et=a(293),tt=a.n(et),at=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).viewer=null,a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(){this.viewer.close();var e={type:"image",url:this.props.url+"/full/full/0/default.jpg",crossOriginPolicy:"Anonymous",ajaxWithCredentials:!1};this.viewer.open(e)}},{key:"componentDidMount",value:function(){this.viewer=tt()({id:this.props.id,prefixUrl:F("web_url")+"/images/",tileSources:{type:"image",url:this.props.url+"/full/full/0/default.jpg",crossOriginPolicy:"Anonymous",ajaxWithCredentials:!1}}),console.log(this.viewer)}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.id,style:{width:"100%",height:"25em",maxWidth:"150em"}})}}]),t}(r.a.Component),nt=(a(467),a(194)),rt=a.n(nt),lt=a(156),it=a.n(lt),ot=q(function(e){return{paper:{padding:e.spacing(2),color:"#212121",backgroundColor:"#FAFAFA",textAlign:"justify",fontSize:18},typography:{fontFamily:"-apple-system",fontWeight:600},title:{fontSize:24,fontStyle:"oblique",textAlign:"center",fontWeight:600},linkPage:{color:"#212121",fontSize:18,fontWeight:400,"&:hover":{color:"#0091EA"}},selectedLink:{fontWeight:600,color:"#0091EA",fontSize:18}}});function st(e,t,a){console.log("page :",e);var n={transcription:"Transcription",edition:"\xc9dition"};return r.a.createElement(ot,null,function(l){var i=l.classes;return r.a.createElement("div",null,r.a.createElement(f.a,{className:i.title},n[a]),r.a.createElement(Je.a,{className:i.paper},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e[t][a]}})))})}var ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={idx:0,cur_page:null},a.handlePageClick=a.handlePageClick.bind(Object(p.a)(a)),a.handleExportClick=a.handleExportClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handlePageClick",value:function(e){e.target.getAttribute("value")!==this.state.idx&&this.setState({idx:e.target.getAttribute("value")})}},{key:"handleExportClick",value:function(){sessionStorage.usertoken||this.setState({open:!0})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.data.will_pages.findIndex(function(t){return rt()(t.page_type,e.props.cur_page)});-1!==t&&this.setState({idx:t});var a=document.getElementsByClassName("lb"),n=!0,l=!1,i=void 0;try{for(var o,s=a[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.before(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ze.a,{titleAccess:"changement de ligne",color:"primary",style:{cursor:"help"},id:"newLine_lb"}))))}}catch(k){l=!0,i=k}finally{try{n||null==s.return||s.return()}finally{if(l)throw i}}var c=document.getElementsByClassName("space_vertical"),m=!0,u=!1,d=void 0;try{for(var p,h=c[Symbol.iterator]();!(m=(p=h.next()).done);m=!0){p.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement($e.a,{titleAccess:"Marque un espace vertical",color:"primary",style:{cursor:"help"},id:"spaceLine_vertical"}))))}}catch(k){u=!0,d=k}finally{try{m||null==h.return||h.return()}finally{if(u)throw d}}var g=document.getElementsByClassName("space_horizontal"),f=!0,E=!1,y=void 0;try{for(var b,v=g[Symbol.iterator]();!(f=(b=v.next()).done);f=!0){b.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ye.a,{titleAccess:"Marque un espace horizontal",color:"primary",style:{cursor:"help"},id:"spaceLine_horizontal"}))))}}catch(k){E=!0,y=k}finally{try{f||null==v.return||v.return()}finally{if(E)throw y}}}},{key:"componentDidUpdate",value:function(){var e=this,t=document.location.href.lastIndexOf("&page_type");if(-1!==t){var a=this.props.data.will_pages.findIndex(function(t){return rt()(t.page_type,e.props.cur_page)});-1!==a&&a!==this.state.idx&&(window.history.replaceState({},document.title,document.location.href.substring(0,t)),this.setState({idx:a}))}if(null===document.getElementById("newLine_lb")){var n=document.getElementsByClassName("lb"),l=!0,i=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){s.value.before(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ze.a,{titleAccess:"changement de ligne",color:"primary",style:{cursor:"help"},id:"newLine_lb"}))))}}catch(C){i=!0,o=C}finally{try{l||null==c.return||c.return()}finally{if(i)throw o}}}if(null===document.getElementById("spaceLine_vertical")){var m=document.getElementsByClassName("space_vertical"),u=!0,d=!1,p=void 0;try{for(var h,g=m[Symbol.iterator]();!(u=(h=g.next()).done);u=!0){h.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement($e.a,{titleAccess:"Marque un espace vertical",color:"primary",style:{cursor:"help"},id:"spaceLine_vertical"}))))}}catch(C){d=!0,p=C}finally{try{u||null==g.return||g.return()}finally{if(d)throw p}}}if(null===document.getElementById("spaceLine_horizontal")){var f=document.getElementsByClassName("space_horizental"),E=!0,y=!1,b=void 0;try{for(var v,k=f[Symbol.iterator]();!(E=(v=k.next()).done);E=!0){v.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ye.a,{titleAccess:"Marque un espace horizontal",color:"primary",style:{cursor:"help"},id:"spaceLine_horizontal"}))))}}catch(C){y=!0,b=C}finally{try{E||null==k.return||k.return()}finally{if(y)throw b}}}}},{key:"render",value:function(){var e=this;console.log("data :",this.props.data);var t=null;if(this.props.data){var a=this.props.data.will_pages.length<=this.state.idx?0:this.state.idx;t=r.a.createElement(ot,null,function(t){var n=t.classes;return r.a.createElement("div",null,r.a.createElement(de.a,{container:!0,direction:"column",justify:"flex-start"},r.a.createElement(de.a,{key:3,item:!0},r.a.createElement(_.a,{style:{marginLeft:"90%"},id:"btExport",onClick:e.handleExportClick,"aria-label":"Export"},r.a.createElement(it.a,{fontSize:"large"}))),r.a.createElement(de.a,{key:2,item:!0},r.a.createElement(Je.a,null,r.a.createElement(de.a,{container:!0,justify:"flex-start",alignItems:"center"},r.a.createElement(de.a,{item:!0,className:K()(n.typography,n.paper),xs:6},r.a.createElement(f.a,null,e.props.data["will_identifier.name"]),r.a.createElement(f.a,null,"Mort pour la france le ..."),r.a.createElement(f.a,null,"Testament r\xe9dig\xe9 le ..."),r.a.createElement(f.a,null,"Cote aux"," ",e.props.data["will_identifier.institution"]," ",e.props.data["will_identifier.cote"]),r.a.createElement(f.a,null,e.props.data["will_physDesc.support"][0].toUpperCase()+e.props.data["will_physDesc.support"].slice(1),", ",e.props.data["will_physDesc.handDesc"],","," ",e.props.data["will_physDesc.dim"].width,e.props.data["will_physDesc.dim"].unit," x"," ",e.props.data["will_physDesc.dim"].height,e.props.data["will_physDesc.dim"].unit)),r.a.createElement(de.a,{item:!0,className:K()(n.typography,n.paper),xs:6},r.a.createElement(f.a,{variant:"h6"},"Les contributeurs :"),e.props.data.contributions.map(function(e){return r.a.createElement(f.a,null," ",e.resp[0].toUpperCase()+e.resp.substring(1)," ",": ",e.persName.join(", "))}))))),r.a.createElement(de.a,{key:0,item:!0},e.props.createPageMenu(e.props.data._id,e.props.data.will_pages,a,e.handlePageClick)),r.a.createElement(de.a,{key:1,item:!0},r.a.createElement(de.a,{container:!0,justify:"center",alignItems:"flex-start",direction:"row",spacing:2},r.a.createElement(de.a,{key:10,item:!0,sm:4},r.a.createElement(f.a,{className:n.title},"Image"),r.a.createElement(Je.a,{className:n.paper},r.a.createElement(at,{url:e.props.data.will_pages[a].picture_url,id:"willImage"}))),r.a.createElement(de.a,{key:11,item:!0,sm:4},st(e.props.data.will_pages,a,"transcription")),r.a.createElement(de.a,{key:12,item:!0,sm:4},st(e.props.data.will_pages,a,"edition"))))))})}return t}}]),t}(n.Component),mt=a(709),ut=a(683),dt=a(684),pt=a(685),ht=a(710),gt=a(686),ft=a(629),Et=a(682),yt=q(function(e){return{paper:{width:450,padding:e.spacing(2),fontFamily:["Fira Sans","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),fontSize:18,color:"#212121",backgroundColor:"#FAFAFA",textAlign:"justify"},title:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),fontSize:20,fontStyle:"oblique",fontWeight:600,textAlign:"center"},linkPage:{paddingLeft:15,color:"#212121",fontSize:18,fontWeight:500},selectedLink:{fontWeight:600,color:"#0091EA"},typography:{fontFamily:["Carta Nova Text Regular","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),fontWeight:600}}});var bt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={idx:[0,0,0],type:"image"},a.handlePageClick=a.handlePageClick.bind(Object(p.a)(a)),a.handleMenuClick=a.handleMenuClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handlePageClick",value:function(e){return function(t){if(t.target.getAttribute("value")!==this.state.idx){var a=this.state.idx;a[e]=t.target.getAttribute("value"),this.setState({idx:a})}}.bind(this)}},{key:"handleMenuClick",value:function(e){this.setState({type:["image","transcription","edition"][e.target.getAttribute("value")]})}},{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("lb"),t=!0,a=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){l.value.before(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ze.a,{titleAccess:"changement de ligne",color:"primary",style:{cursor:"help"},id:"newLine_lb"}))))}}catch(b){a=!0,n=b}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}var o=document.getElementsByClassName("space_vertical"),s=!0,c=!1,m=void 0;try{for(var u,d=o[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){u.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement($e.a,{titleAccess:"Marque un espace vertical",color:"primary",style:{cursor:"help"},id:"spaceLine_vertical"}))))}}catch(b){c=!0,m=b}finally{try{s||null==d.return||d.return()}finally{if(c)throw m}}var p=document.getElementsByClassName("space_horizontal"),h=!0,g=!1,f=void 0;try{for(var E,y=p[Symbol.iterator]();!(h=(E=y.next()).done);h=!0){E.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ye.a,{titleAccess:"Marque un espace horizontal",color:"primary",style:{cursor:"help"},id:"spaceLine_horizontal"}))))}}catch(b){g=!0,f=b}finally{try{h||null==y.return||y.return()}finally{if(g)throw f}}}},{key:"componentDidUpdate",value:function(){if(null===document.getElementById("newLine_lb")){var e=document.getElementsByClassName("lb"),t=!0,a=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){l.value.before(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ze.a,{titleAccess:"changement de ligne",color:"primary",style:{cursor:"help"},id:"newLine_lb"}))))}}catch(b){a=!0,n=b}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}}if(null===document.getElementById("spaceLine_vertical")){var o=document.getElementsByClassName("space_vertical"),s=!0,c=!1,m=void 0;try{for(var u,d=o[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){u.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement($e.a,{titleAccess:"Marque un espace vertical",color:"primary",style:{cursor:"help"},id:"spaceLine_vertical"}))))}}catch(b){c=!0,m=b}finally{try{s||null==d.return||d.return()}finally{if(c)throw m}}}if(null===document.getElementById("spaceLine_horizontal")){var p=document.getElementsByClassName("space_horizental"),h=!0,g=!1,f=void 0;try{for(var E,y=p[Symbol.iterator]();!(h=(E=y.next()).done);h=!0){E.value.append(H(Ve.a.renderToStaticMarkup(r.a.createElement(Ye.a,{titleAccess:"Marque un espace horizontal",color:"primary",style:{cursor:"help"},id:"spaceLine_horizontal"}))))}}catch(b){g=!0,f=b}finally{try{h||null==y.return||y.return()}finally{if(g)throw f}}}}},{key:"render",value:function(){var e=this,t=this.props.data.length;return r.a.createElement(yt,null,function(a){var n=a.classes;return r.a.createElement(de.a,{container:!0,justify:"center",alignItems:"center",direction:"column",spacing:5},r.a.createElement(de.a,{item:!0},r.a.createElement(y.a,{"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:0,value:0,component:"button",color:"inherit",href:"#",onClick:e.handleMenuClick,className:"image"===e.state.type?K()(n.linkPage,n.selectedLink):n.linkPage},"Image"),r.a.createElement(b.a,{id:1,value:1,component:"button",color:"inherit",href:"#",onClick:e.handleMenuClick,className:"transcription"===e.state.type?K()(n.linkPage,n.selectedLink):n.linkPage},"Transcription"),r.a.createElement(b.a,{id:2,value:2,component:"button",color:"inherit",href:"#",onClick:e.handleMenuClick,className:"edition"===e.state.type?K()(n.linkPage,n.selectedLink):n.linkPage},"Edition"))),r.a.createElement(de.a,{item:!0},r.a.createElement(de.a,{container:!0,alignItems:"flex-start",justify:"center",direction:"row",spacing:2},e.props.data.map(function(a,l){return r.a.createElement(de.a,{item:!0,key:100*l,sm:12/t},r.a.createElement(de.a,{key:10*l,container:!0,justify:"center",alignItems:"center",direction:"column",spacing:2},r.a.createElement(de.a,{key:1,item:!0},r.a.createElement(f.a,{className:n.title},a.name)),r.a.createElement(de.a,{key:2,item:!0},function(e,t,a){for(var n=[],l=function(l){console.log("page click :",e[l].page_type.type+"_"+e[l].page_type.id),n.push(r.a.createElement(yt,{key:l},function(n){var i=n.classes;return r.a.createElement(b.a,{id:l,value:l,component:"button",color:"inherit",onClick:a,className:parseInt(t)===l?K()(i.typography,i.selectedLink):K()(i.linkPage,i.typography)},e[l].page_type.type," ",e[l].page_type.id)}))},i=0;i<e.length;i++)l(i);return r.a.createElement(y.a,{style:{marginTop:20,marginBottom:20},"aria-label":"Breadcrumb"}," ",n," ")}(a.will,e.state.idx[l],e.handlePageClick(l)))),r.a.createElement(de.a,{key:3,item:!0},"image"===e.state.type?r.a.createElement("div",null,r.a.createElement(f.a,{className:n.title},"Image"),r.a.createElement(Je.a,{className:n.paper},r.a.createElement(at,{url:a.will[e.state.idx[l]].picture_url,id:a.id}))):st(a.will,e.state.idx[l],e.state.type)))}))))})}}]),t}(n.Component),vt=a(297),kt=a.n(vt),Ct=a(188),St=a.n(Ct),wt=a(187),_t=a.n(wt),jt=a(296),xt=a.n(jt),Ot=a(295),Nt=a.n(Ot),It=q(function(e){return{typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},typoName:{fontSize:20,fontStyle:"oblique",fontWeight:600,color:"#424242"},typoText:{fontSize:16,fontWeight:500,marginTop:15,paddingLeft:20,display:"block"},margin:{margin:e.spacing(12)},willTitle:{"&:hover":{borderColor:"#E0E0E0",border:"solid",cursor:"pointer"}},chip:{margin:e.spacing(.5)},chipRoot:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:e.spacing(.5)},info:{backgroundColor:"#1976d2"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center",fontSize:16}}}),At={page:"Page",envelope:"Enveloppe",codicil:"Codicille"},Lt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){this.setState({openDialog:!1,openAlert:!1,willPage:null,cur_page:0,anchorEl:null})},a.state={curData:[],openDialog:!1,openAlert:!1,willPage:null,cur_page:0,styleTitle:{},count:0,chipData:[],displayType:null,anchorEl:null,message:"",myWills:[]},a.userToken=M(),a.displayMore=a.displayMore.bind(Object(p.a)(a)),a.handleClose=a.handleClose.bind(Object(p.a)(a)),a.handleClickWill=a.handleClickWill.bind(Object(p.a)(a)),a.handleDelete=a.handleDelete.bind(Object(p.a)(a)),a.handleCompareClick=a.handleCompareClick.bind(Object(p.a)(a)),a.handleOpenMenu=a.handleOpenMenu.bind(Object(p.a)(a)),a.handleAddShoppingWill=a.handleAddShoppingWill.bind(Object(p.a)(a)),a.handleremoveShoppingWill=a.handleremoveShoppingWill.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleOpenMenu",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"displayMore",value:function(e,t){return function(a){var n=e._id;n+=t?"/"+t.type+"_"+t.id:"",window.location.href=F("web_url")+"/will/"+n}}},{key:"handleAddShoppingWill",value:function(e){return function(t){var a=this,n=sessionStorage.myWills.length>0?sessionStorage.myWills.split(","):[];n.push(e);var r={email:this.userToken.email,myWills:n};G(r).then(function(e){if(200===e.status)a.setState({message:e.mess,myWills:n}),sessionStorage.setItem("myWills",n);else{var t=e.err?e.err:"Connexion au serveur a \xe9chou\xe9 !";a.setState({message:t})}})}.bind(this)}},{key:"handleremoveShoppingWill",value:function(e){return function(t){var a=this,n=sessionStorage.myWills.split(",").filter(function(t){return t!==e}),r={email:this.userToken.email,myWills:n};G(r).then(function(e){if(200===e.status)a.setState({message:e.mess,myWills:n}),sessionStorage.setItem("myWills",n);else{var t=e.err?e.err:"Connexion au serveur a \xe9chou\xe9 !";a.setState({message:t})}})}.bind(this)}},{key:"handleClickWill",value:function(e){return function(t){var a=this.state.styleTitle,n=this.state.count,r=this.state.chipData;Boolean(a[e._id])?(a[e._id]=!1,n-=1,r=r.filter(function(t){return t.id!==e._id})):n<3?(a[e._id]=!0,n+=1,r.push({will:e.will_pages,id:e._id,name:e.testator_name})):this.setState({openAlert:!0}),this.setState({styleTitle:a,count:n,chipData:r})}.bind(this)}},{key:"handleDelete",value:function(e){var t=this.state.styleTitle;t[e.id]=!1,this.setState({chipData:this.state.chipData.filter(function(t){return t.id!==e.id}),count:this.state.count-1,styleTitle:t})}},{key:"handleCompareClick",value:function(){var e=this.state.chipData.map(function(e){return e.id});window.location.href=F("web_url")+"/compare/"+e.join("+")}},{key:"componentDidUpdate",value:function(){var e=this;if(void 0!==this.state.chipData){var t=r.a.createElement("div",{id:"chipWill"},this.state.chipData.map(function(t){var a=t.name.split(" "),n=a[0].length>2?a[0]:a[0]+" "+a[1],l=a[a.length-1];return r.a.createElement(mt.a,{key:t.id,label:l[0]+". "+n,onDelete:function(a){return e.handleDelete(t)}})}));this.state.count>0?i.a.render(t,document.getElementById("chipRoot")):i.a.render(r.a.createElement("div",{id:"chipWill"}),document.getElementById("chipRoot"))}document.getElementById("btCompare").addEventListener("click",this.handleCompareClick,!0)}},{key:"componentDidMount",value:function(){sessionStorage.myWills&&this.setState({myWills:sessionStorage.myWills.length>0?sessionStorage.myWills.split(","):[]})}},{key:"render",value:function(){var e=this;console.log("mess :",this.state.message);var t=this.state.curData.map(function(t,a){var n=[];if(t.inner_hits){var l=t.inner_hits.will_pages.hits.hits.length;t.inner_hits.will_pages.hits.hits.sort(function(e,t){return t._source.page_type.type.localeCompare(e._source.page_type.type)}),t.inner_hits.will_pages.hits.hits.sort(function(e,t){return e._source.page_type.id-t._source.page_type.id}),n=t.inner_hits.will_pages.hits.hits.map(function(a,n){var i=r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{id:"btMore",onClick:e.displayMore(t,a._source.page_type),"aria-label":"More",component:"button",style:{color:"#424242",fontSize:16}},At[a._source.page_type.type]," ",a._source.page_type.id)),o=[];return a.highlight&&(o=a.highlight[Object.keys(a.highlight)[0]].map(function(e,t){return r.a.createElement(It,{key:t+1e3},function(t){var a=t.classes;return r.a.createElement(f.a,{component:"span",className:K()(a.typoText,a.typography),dangerouslySetInnerHTML:{__html:e}})})})),r.a.createElement(r.a.Fragment,{key:1e3*n+1},i,o,n<l-1?r.a.createElement(Et.a,{variant:"inset",light:!0}):null)})}var i=Boolean(e.userToken)?e.state.myWills.findIndex(function(e){return e===t._id}):-1;return r.a.createElement(It,{key:a},function(a){var l=a.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft.a,{alignItems:"flex-start",component:"div"},r.a.createElement(ut.a,null,r.a.createElement(Ee.a,{alt:"avatar-testator",src:F("web_url")+"/images/default-testator.png"})),r.a.createElement(dt.a,{primary:r.a.createElement(de.a,{container:!0,direction:"row",spacing:1},r.a.createElement(de.a,{item:!0,xs:10},r.a.createElement(b.a,{onClick:e.displayMore(t,null),"aria-label":"More",className:K()(l.typoName,l.typography),component:"button"},t["will_identifier.name"].replace("Testament de",""))),r.a.createElement(de.a,{item:!0,xs:2,value:t._id},r.a.createElement(de.a,{container:!0,direction:"row",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement(Be.a,{title:"Ajouter \xe0 la comparaison",style:{cursor:"hand"},interactive:!0},Boolean(e.state.styleTitle[t._id])?r.a.createElement(_t.a,{onClick:e.handleClickWill(t),color:"action"}):r.a.createElement(St.a,{onClick:e.handleClickWill(t)}))),Boolean(e.userToken)?r.a.createElement(de.a,{item:!0},-1===i?r.a.createElement(Be.a,{title:"Ajouter au panier",placement:"bottom",style:{cursor:"hand"}},r.a.createElement(Nt.a,{onClick:e.handleAddShoppingWill(t._id)})):r.a.createElement(Be.a,{title:"Supprimer de panier",placement:"bottom",style:{cursor:"hand"}},r.a.createElement(xt.a,{color:"action",onClick:e.handleremoveShoppingWill(t._id)}))):null))),secondary:n})),r.a.createElement(Et.a,{variant:"inset",light:!0}))})});return t.push(r.a.createElement(S.a,{key:1e3,fullWidth:!0,maxWidth:"xl",open:this.state.openDialog,onClose:this.handleClose,"aria-labelledby":"max-width-dialog-title"},r.a.createElement(de.a,{container:!0,direction:"row",spacing:4},r.a.createElement(de.a,{item:!0,xs:10},r.a.createElement(w.a,{id:"max-width-dialog-title"},"")),r.a.createElement(de.a,{item:!0,xs:2},r.a.createElement(pt.a,null,r.a.createElement(_.a,{id:"btClose",onClick:this.handleClose,"aria-label":"Close"},r.a.createElement(ae.a,{fontSize:"large",style:{color:"#b71c1c"}}))))),r.a.createElement(j.a,null,"More"===this.state.displayType?r.a.createElement(ct,{data:this.state.willPage,cur_page:this.state.cur_page}):r.a.createElement(bt,{data:this.state.chipData})))),t.push(r.a.createElement(ht.a,{anchorOrigin:{vertical:"top",horizontal:"center"},key:"topCenter",open:this.state.openAlert,onClose:this.handleClose,autoHideDuration:5e3,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Le nombre maximum de testaments \xe0 comparer est atteint.")},r.a.createElement(It,null,function(t){var a=t.classes;return r.a.createElement(gt.a,{className:a.info,"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(kt.a,{className:K()(a.icon,a.iconVariant)}),"Le nombre maximum de testaments \xe0 comparer est atteint."),action:[r.a.createElement(_.a,{key:"close","aria-label":"close",color:"inherit",onClick:e.handleClose},r.a.createElement(ae.a,{className:a.icon}))]})}))),r.a.createElement("div",{className:"list-container"},t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.data!==t.curData&&void 0!==e.data?{curData:e.data,anchorEl:null}:null}}]),t}(r.a.Component),Pt=a(708),Tt=q(function(e){return{root:{display:"flex",flexWrap:"wrap",margin:e.spacing(1,1,4,1)},inputSearch:{borderRadius:"22px",border:"1px solid red"},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},typoTitle:{fontSize:15,fontWeight:"bold",color:"#424242"},select:{height:20}}}),Wt=function(e,t){if(""===e)return{query:{match_all:{}}};var a=e,n="will_pages.edition_text",r={"will_pages.edition_text":{type:"plain"}};return t&&t.dataField&&"will_pages.transcription_text"===t.dataField[0]&&(n="will_pages.transcription_text",r={"will_pages.transcription_text":{type:"plain"}}),{query:{nested:{path:"will_pages",query:{simple_query_string:{fields:[n],query:a}},inner_hits:{highlight:{order:"score",fields:r,pre_tags:["<mark>"],post_tags:["</mark>"],boundary_scanner_locale:"fr-FR",number_of_fragments:10,fragment_size:50}}}}}},Dt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={value:"will_pages.transcription_text"},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(re.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this,t="will_pages.edition_text"===this.state.value?"\xe9dition":"transcription";return r.a.createElement(Tt,null,function(a){var n=a.classes;return r.a.createElement(de.a,{className:n.root,container:!0,justify:"center",direction:"column",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement(de.a,{container:!0,direction:"row",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement(f.a,{className:K()(n.typography,n.typoTitle)},"Effectuer votre recherche dans")),r.a.createElement(de.a,{item:!0},r.a.createElement(Pt.a,{value:e.state.value,onChange:e.handleChange,className:n.select,name:"value"},r.a.createElement(C.a,{value:"will_pages.transcription_text"},"transcription"),r.a.createElement(C.a,{value:"will_pages.edition_text"},"\xe9dition"))))),r.a.createElement(de.a,{item:!0,className:n.dataSearch},r.a.createElement(Te.a,{componentId:"mainSearch",dataField:[e.state.value],queryFormat:"or",placeholder:"Que recherchez-vous dans "+t+" ?",iconPosition:"right",filterLabel:"search",autosuggest:!1,customQuery:Wt,URLParams:!0,onValueChange:function(e){},onValueSelected:function(e,t,a){},onQueryChange:function(e,t){},searchOperators:!0,fuzziness:"AUTO",innerClass:{input:n.inputSearch}})))})}}]),t}(r.a.Component),Bt=q(function(e){return{typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},typoName:{fontSize:20,fontStyle:"oblique",fontWeight:600},typoText:{fontSize:16,fontWeight:500,marginTop:15,paddingLeft:20,display:"block"},margin:{margin:e.spacing(12)},bootstrapRoot:{display:"none",position:"fixed",bottom:10,right:10,boxShadow:"none",fontSize:16,border:"1px solid","&:hover":{backgroundColor:"#bcaaa4",borderColor:"#bcaaa4"}},divider:{color:"#212121"}}});window.onscroll=function(){Boolean(document.getElementById("btTop"))&&(document.body.scrollTop>100||document.documentElement.scrollTop>100?document.getElementById("btTop").style.display="block":document.getElementById("btTop").style.display="none")};var Mt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).topFunction=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},a.state={curField:"",curOrder:""},a.topFunction=a.topFunction.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{key:0},r.a.createElement("div",{className:"main-container"},r.a.createElement(Dt,null),r.a.createElement(Te.g,{clearAllLabel:"Effacer les crit\xe8res de recherche"}),r.a.createElement(Te.f,{react:{and:["mainSearch","contributors","institution","date","cote","testatorSearch","ProvenanceTag","checkBox"]},dataField:this.state.curField,sortBy:this.state.curOrder,componentId:"searchResult",stream:!0,pagination:!1,size:15,showResultStats:!0,infiniteScroll:!0,loader:"Loading Results..",renderResultStats:function(e){return" ".concat(e.numberOfResults," testaments sur 193 correspondent \xe0 votre recherche")}},function(e){var t=e.data;e.error,e.loading;return r.a.createElement(Lt,{data:t})})),r.a.createElement("div",{className:"rightSidebar"},r.a.createElement(de.a,{container:!0,direction:"row",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement(de.a,{container:!0,direction:"row",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement("div",{id:"chipRoot"},r.a.createElement("div",{id:"chipWill"}))),r.a.createElement(de.a,{item:!0},r.a.createElement(Be.a,{title:"Comparer les testaments",style:{cursor:"hand"},interactive:!0},r.a.createElement(g.a,{id:"btCompare","aria-label":"Compare",size:"small"},r.a.createElement(ze.a,null)))))),r.a.createElement(de.a,{item:!0},r.a.createElement(Te.e,{componentId:"mapSearch",react:{and:["mainSearch","contributors","institution","date","cote","testatorSearch","ProvenanceTag"]},defaultQuery:function(){return{_source:["will_contents.will_place","will_identifier.name"],size:100,query:{match_all:{}}}},render:function(e){var t=e.data;return r.a.createElement(He,{data:t})}})),r.a.createElement(de.a,{item:!0}))),r.a.createElement(Bt,null,function(t){var a=t.classes;return r.a.createElement(Be.a,{title:"Au top",style:{cursor:"hand"},interactive:!0},r.a.createElement(g.a,{id:"btTop",onClick:e.topFunction,"aria-label":"Top",className:K()(a.margin,a.bootstrapRoot),size:"medium"},r.a.createElement(Fe.a,null)))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.field!==t.curField||e.order!==t.curOrder?{curField:e.field,curOrder:e.order}:null}}]),t}(r.a.Component),Ft=function(){return r.a.createElement(Te.b,{componentId:"date",dataField:"will_contents.will_date",title:"Date de r\xe9daction",placeholder:{start:"D\xe9but ",end:"Fin"},queryFormat:"date",URLParams:!0,initialMonth:new Date("1914-07-01")})},Rt=a(703),zt=a(687),Ut=a(688),qt=function(){return r.a.createElement(Rt.a,null,r.a.createElement(zt.a,{expandIcon:r.a.createElement(Ie.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(de.a,{container:!0,direction:"column",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement(Te.h,{className:"datasearch",react:{and:["mainSearch","cote","date","institution","contributors"]},componentId:"testatorSearch",dataField:"testator_name.keyword",title:"Nom du testateur",size:1e3,sortBy:"count",showCount:!0,placeholder:"Nom de testateur",showFilter:!0,filterLabel:"search",URLParams:!0,loader:"Loading ...",innerClass:{list:"list"}})),r.a.createElement(de.a,{item:!0},r.a.createElement(Te.h,{className:"datasearch",react:{and:["mainSearch","testatorSearch","date","institution","contributors"]},componentId:"cote",dataField:"will_identifier.cote.keyword",title:"Cote du testament",size:1e3,sortBy:"count",showCount:!0,placeholder:"Cote du testament",showFilter:!0,filterLabel:"search",URLParams:!0,iconPosition:"right",loader:"Loading ...",innerClass:{list:"list"}})))),r.a.createElement(Ut.a,null,r.a.createElement(de.a,{container:!0,justify:"center",direction:"column",spacing:1},r.a.createElement(de.a,{item:!0},r.a.createElement(Te.a,{className:"datasearch",componentId:"deathPlace",dataField:["death_place"],queryFormat:"and",placeholder:"Lieu",title:"Lieu de d\xe9c\xe8s",iconPosition:"left",filterLabel:"search",autosuggest:!0,URLParams:!0})),r.a.createElement(de.a,{item:!0},r.a.createElement(Te.a,{className:"datasearch",componentId:"willPlace",dataField:["will_place"],queryFormat:"and",placeholder:"Commune",title:"Commune d'origine",iconPosition:"left",filterLabel:"search",autosuggest:!1,URLParams:!0})))))},Ht=a(116),Qt=a.n(Ht),Vt=a(117),Jt=a.n(Vt),Xt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={field:"",order:"",value:0},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){switch(e.target.value){case 1:this.setState({value:e.target.value,field:"testator_name_norm.keyword",order:"asc"});break;case 2:this.setState({value:e.target.value,field:"testator_name_norm.keyword",order:"desc"});break;case 5:this.setState({value:e.target.value,field:"will_identifier.cote.keyword",order:"asc"});break;case 6:this.setState({value:e.target.value,field:"will_identifier.cote.keyword",order:"desc"});break;default:this.setState({value:e.target.value,field:"",order:""})}}},{key:"render",value:function(){return r.a.createElement(Te.d,{app:F("es_index_wills"),url:F("es_host"),type:"_doc"},r.a.createElement("div",{className:"search"},r.a.createElement(de.a,{container:!0,justify:"center",direction:"row",spacing:1},r.a.createElement(de.a,{item:!0,xs:2},r.a.createElement("div",{className:"leftSidebar"},r.a.createElement(Je.a,null,"Trier par :"," ",r.a.createElement(Pt.a,{value:this.state.value,onChange:this.handleChange},r.a.createElement(C.a,{value:0},"pertinence"),r.a.createElement(C.a,{value:1},"nom de famille (A-Z)"),r.a.createElement(C.a,{value:2},"nom de famille (Z-A)"),r.a.createElement(C.a,{value:3},"date de r\xe9daction ",r.a.createElement(Qt.a,null)),r.a.createElement(C.a,{value:4},"date de r\xe9daction ",r.a.createElement(Jt.a,null)),r.a.createElement(C.a,{value:5},"Cote (A-Z)"),r.a.createElement(C.a,{value:6},"Cote (Z-A)"))),r.a.createElement(qt,null),r.a.createElement(Je.a,null,r.a.createElement(Ft,null)),r.a.createElement(Je.a,null,r.a.createElement(De,null)),r.a.createElement(Je.a,null,r.a.createElement(We,null)))),r.a.createElement(de.a,{item:!0,xs:10},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Mt,{field:this.state.field,order:this.state.order}))))))}}]),t}(n.Component),Zt=a(36),Gt=a.n(Zt),$t=a(666),Kt=(Te.f.ResultListWrapper,q(function(e){return{root:{flexWrap:"wrap",margin:e.spacing(2,0,0,2)},list:{width:"60%",border:"1px solid #dadce0",margin:"auto",marginTop:e.spacing(4)},detail:{border:"1px solid #dadce0",marginTop:e.spacing(4)},item:{textAlign:"justify",padding:e.spacing(1),margin:e.spacing(1),backgroundColor:"#f5f5f5"},foot:{fontSize:14,margin:e.spacing(1)},head:{fontSize:14,margin:e.spacing(1),padding:e.spacing(1)},title:{color:"#000000",fontSize:"1.5em"},icon:{fontSize:20},menu:{marginTop:e.spacing(4),fontSize:14,textAlign:"justify",display:"block",verticalAlign:"middle"},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600}}})),Yt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={data:[],selectedId:""},a.handleListItemClick=a.handleListItemClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleListItemClick",value:function(e){this.setState({selectedId:e.target.id})}},{key:"componentDidMount",value:function(){var e=document.location.href,t=e.lastIndexOf("about/"),a=z(F("es_host")+"/"+F("es_index_cms")),n="object"===typeof a?a.value:a,r=U(F("es_host")+"/"+F("es_index_cms"),JSON.stringify({size:n,query:{term:{type:3}},sort:[{created:{order:"desc"}}]}));if(-1!==t){var l=e.substring(t+6).split("/"),i=U(F("es_host")+"/"+F("es_index_cms"),JSON.stringify({query:{term:{_id:l[0]}}}));this.setState({data:r,selectedId:i.length>0?i[0]._id:r[0]._id})}else this.setState({data:r,selectedId:r.length>0?r[0]._id:""})}},{key:"render",value:function(){var e=this,t=""===this.state.selectedId?this.state.data[0]:this.state.data.find(function(e){return e._id===this.state.selectedId}.bind(this)),a=document.referrer.includes("search?")?"/search?"+document.referrer.split("?")[1]:"/search",n=[r.a.createElement(b.a,{id:"about",key:1,color:"inherit",component:o.b,to:"/about"}," ","A propos"," "),r.a.createElement(f.a,{key:2,color:"textPrimary"},t?t._source.title:null)],l=r.a.createElement(Je.a,{elevation:0},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"search",key:0,color:"inherit",component:o.b,to:a}," ","Recherche"," "),n)),i=r.a.createElement(Kt,null,function(t){var a=t.classes;return r.a.createElement(Je.a,{className:a.menu},r.a.createElement($t.a,null,e.state.data.map(function(t,n){return r.a.createElement(C.a,{key:n},r.a.createElement(b.a,{id:t._id,className:e.state.selectedId===t._id?K()(a.link,a.activedLink):a.link,component:o.b,to:"/about/"+t._id,onClick:e.handleListItemClick},t._source.title))})))}),s=Boolean(t)?new Date(t._source.created):null;return r.a.createElement(Kt,null,function(e){var a=e.classes;return Boolean(t)?r.a.createElement("div",{className:a.root},l,r.a.createElement(de.a,{container:!0,direction:"row",spacing:2},r.a.createElement(de.a,{item:!0,xs:4},i),r.a.createElement(de.a,{item:!0,xs:8},r.a.createElement("div",{className:a.detail},r.a.createElement(Je.a,{className:a.item,key:0},r.a.createElement(f.a,{className:a.title}," ",t._source.title," "),r.a.createElement(Je.a,{className:a.head},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},t._source.author),r.a.createElement(de.a,{item:!0},Boolean(s)?"Mise \xe0 jour le "+s.toLocaleDateString()+" \xe0 "+s.toLocaleTimeString():""))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:""!==t._source.detail?t._source.detail:t._source.summary}})))))):r.a.createElement(f.a,{variant:"h3"},"Aucune information \xe0 afficher !")})}}]),t}(n.Component),ea=a(118),ta=a.n(ea),aa=Te.f.ResultListWrapper,na=q(function(e){return{root:{flexWrap:"wrap",margin:e.spacing(2,0,0,2)},list:{width:"60%",border:"1px solid #dadce0",margin:"auto",marginTop:e.spacing(4)},detail:{border:"1px solid #dadce0",marginTop:e.spacing(4)},item:{textAlign:"justify",padding:e.spacing(1),margin:e.spacing(1),backgroundColor:"#f5f5f5"},foot:{fontSize:14,margin:e.spacing(1)},head:{fontSize:14,margin:e.spacing(1),padding:e.spacing(1)},title:{color:"#000000",fontSize:"1.5em"},icon:{fontSize:20},menu:{marginTop:e.spacing(4),fontSize:14,textAlign:"justify",display:"block",verticalAlign:"middle"},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600}}}),ra=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={item:null,lastNews:[],selectedId:""},a.handleMoreClick=a.handleMoreClick.bind(Object(p.a)(a)),a.defaultQuery=a.defaultQuery.bind(Object(p.a)(a)),a.handleListItemClick=a.handleListItemClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleListItemClick",value:function(e){var t=this.state.lastNews.find(function(t){return t._id===e.target.id});this.setState({selectedId:e.target.id,item:t?t._source:this.state.item})}},{key:"handleMoreClick",value:function(e){return function(t){document.location.href=F("web_url")+"/news/"+e._id}.bind(this)}},{key:"defaultQuery",value:function(){return{query:{term:{type:2}}}}},{key:"componentDidUpdate",value:function(){-1===document.location.href.lastIndexOf("news/")&&Boolean(this.state.item)&&this.setState({item:null})}},{key:"componentDidMount",value:function(){var e=document.location.href,t=e.lastIndexOf("news/"),a=U(F("es_host")+"/"+F("es_index_cms"),JSON.stringify({size:5,query:{term:{type:2}},sort:[{created:{order:"desc"}}]}));if(-1!==t){var n=e.substring(t+5).split("/"),r=U(F("es_host")+"/"+F("es_index_cms"),JSON.stringify({query:{term:{_id:n[0]}}}));this.setState({lastNews:a,selectedId:r.length>0?r[0]._id:a[0]._id,item:r.length>0?r[0]._source:null})}}},{key:"render",value:function(){var e=this,t=document.referrer.includes("search?")?"/search?"+document.referrer.split("?")[1]:"/search",a=Boolean(this.state.item)?[r.a.createElement(b.a,{id:"news",key:1,color:"inherit",component:o.b,to:"/news"}," ","Actualit\xe9s"," "),r.a.createElement(f.a,{key:2,color:"textPrimary"},this.state.item.title)]:r.a.createElement(b.a,{id:"news",key:1,color:"textPrimary",component:o.b,to:"/news"}," ","Actualit\xe9s"," "),n=r.a.createElement(Je.a,{elevation:0},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"search",key:0,color:"inherit",component:o.b,to:t}," ","Recherche"," "),a)),l=r.a.createElement(na,null,function(t){var a=t.classes;return r.a.createElement(Je.a,{className:a.menu},r.a.createElement(f.a,null,"Les derni\xe8res actualit\xe9s :"),r.a.createElement($t.a,null,e.state.lastNews.map(function(t,n){return r.a.createElement(C.a,{key:n},r.a.createElement(b.a,{id:t._id,className:e.state.selectedId===t._id?K()(a.link,a.activedLink):a.link,component:o.b,to:"/news/"+t._id,onClick:e.handleListItemClick},t._source.title))})))}),i=Boolean(this.state.item)?new Date(this.state.item.created):null;return r.a.createElement(na,null,function(t){var a=t.classes;return Boolean(e.state.item)?r.a.createElement("div",{className:a.root},n,r.a.createElement(de.a,{container:!0,direction:"row",spacing:2},r.a.createElement(de.a,{item:!0,xs:4},l),r.a.createElement(de.a,{item:!0,xs:8},r.a.createElement("div",{className:a.detail},r.a.createElement(Je.a,{className:a.item,key:0},r.a.createElement(f.a,{className:a.title}," ",e.state.item.title," "),r.a.createElement(Je.a,{className:a.head},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},e.state.item.author),r.a.createElement(de.a,{item:!0},Boolean(i)?"Mise \xe0 jour le "+i.toLocaleDateString()+" \xe0 "+i.toLocaleTimeString():""))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:""!==e.state.item.detail?e.state.item.detail:e.state.item.summary}})))))):r.a.createElement(Te.d,{app:F("es_index_cms"),url:F("es_host"),type:"_doc"},r.a.createElement("div",{className:a.root},n,r.a.createElement("div",{className:a.list},r.a.createElement(Te.f,{dataField:"created",componentId:"news_id",stream:!0,pagination:!1,paginationAt:"bottom",size:5,pages:10,sortBy:"desc",showEndPage:!1,renderResultStats:function(e){return r.a.createElement("h6",null,e.numberOfResults," actualit\xe9s")},URLParams:!1,defaultQuery:e.defaultQuery},function(t){var n=t.data;t.error,t.loading;return r.a.createElement(aa,null,n.map(function(t,n){var l=new Date(t.created);return r.a.createElement(Je.a,{className:a.item,key:n},r.a.createElement(f.a,{className:a.title}," ",t.title," "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:""!==t.summary?t.summary:t.detail}}),r.a.createElement(Je.a,{className:a.foot},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},t.author),r.a.createElement(de.a,{item:!0},"Mise \xe0 jour le ",l.toLocaleDateString()," \xe0 ",l.toLocaleTimeString()),r.a.createElement(de.a,{item:!0},r.a.createElement(_.a,{"aria-label":"More",onClick:e.handleMoreClick(t)},r.a.createElement(ta.a,{className:a.icon}))))))}))}))))})}}]),t}(n.Component),la=(a(177),Te.f.ResultListWrapper),ia=q(function(e){return{explorMenu:{marginTop:e.spacing(2)},menu:{display:"flex"},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontSize:18,fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600},linkPage:{color:"#212121",fontSize:18,fontWeight:400,"&:hover":{color:"#0091EA"}},selectedLink:{fontWeight:600,color:"#0091EA",fontSize:18}}});function oa(){var e=r.a.useState("wills"),t=Object(ne.a)(e,2),a=t[0],n=t[1],l=function(e){n(e.target.id)};return r.a.createElement(ia,null,function(e){var t=e.classes;return r.a.createElement(y.a,{"aria-label":"Breadcrumb",className:t.explorMenu},r.a.createElement(b.a,{id:"wills",className:"wills"===a?K()(t.link,t.activedLink):t.link,component:o.b,to:"/wills",onClick:l},"Les testaments"),r.a.createElement(b.a,{id:"testators",className:"testators"===a?K()(t.link,t.activedLink):t.link,component:o.b,to:"/testators",onClick:l},"Les testateurs"),r.a.createElement(b.a,{id:"places",className:"places"===a?K()(t.link,t.activedLink):t.link,component:o.b,to:"/places",onClick:l},"Les lieux"))})}function sa(e,t,a,n){for(var l=[],i={page:"Page",envelope:"Enveloppe",codicil:"Codicille"},o=function(e){console.log("page click :",t[e].page_type.type+"_"+t[e].page_type.id),l.push(r.a.createElement(ia,null,function(l){var o=l.classes;return r.a.createElement(b.a,{id:e,value:e,component:"button",color:"inherit",onClick:n,className:parseInt(a)===e?K()(o.typography,o.selectedLink):K()(o.linkPage,o.typography)},i[t[e].page_type.type]," ",t[e].page_type.id)}))},s=0;s<t.length;s++)o(s);return r.a.createElement(y.a,{style:{marginTop:20,marginBottom:20},"aria-label":"Breadcrumb"}," ",l," ")}var ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={field:"",order:"",value:3},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){switch(e.target.value){case 1:this.setState({value:e.target.value,field:"testator_name_norm.keyword",order:"asc"});break;case 2:this.setState({value:e.target.value,field:"testator_name_norm.keyword",order:"desc"});break;case 3:this.setState({value:e.target.value,field:"will_contents.will_date",order:"asc"});break;case 4:this.setState({value:e.target.value,field:"will_contents.will_date",order:"desc"});break;case 5:this.setState({value:e.target.value,field:"will_identifier.cote.keyword",order:"asc"});break;case 6:this.setState({value:e.target.value,field:"will_identifier.cote.keyword",order:"desc"});break;default:this.setState({value:e.target.value,field:"will_contents.will_date",order:"asc"})}}},{key:"render",value:function(){return r.a.createElement(Te.d,{app:F("es_index_wills"),url:F("es_host"),type:"_doc"},r.a.createElement(oa,null),r.a.createElement("div",{className:"wills_menu"},r.a.createElement(Je.a,{elevation:0},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"search",key:0,color:"inherit",component:o.b,to:"/search"}," ","Recherche"," "),r.a.createElement(f.a,{color:"textPrimary"},"Les testaments")))),r.a.createElement("div",{className:"wills_order"},"Trier par :",r.a.createElement(Pt.a,{value:this.state.value,onChange:this.handleChange},r.a.createElement(C.a,{value:1},"nom de famille (A-Z)"),r.a.createElement(C.a,{value:2},"nom de famille (Z-A)"),r.a.createElement(C.a,{value:3},"date de r\xe9daction ",r.a.createElement(Qt.a,null)),r.a.createElement(C.a,{value:4},"date de r\xe9daction ",r.a.createElement(Jt.a,null)),r.a.createElement(C.a,{value:5},"Cote (A-Z)"),r.a.createElement(C.a,{value:6},"Cote (Z-A)"))),r.a.createElement("div",null,r.a.createElement(Te.f,{dataField:this.state.field,componentId:"will",stream:!0,pagination:!0,paginationAt:"top",size:1,pages:10,sortBy:this.state.order,showEndPage:!1,renderResultStats:function(e){return"".concat(e.numberOfResults," testaments trouv\xe9s.")},URLParams:!0},function(e){var t=e.data;e.error,e.loading;return r.a.createElement(la,null,t.map(function(e,t){return r.a.createElement("div",{className:"root",key:t},r.a.createElement(Je.a,null,r.a.createElement(ct,{data:e,createPageMenu:sa})))}))})))}}]),t}(n.Component),ma=a(627),ua=q(function(e){return{menu:{display:"flex"},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontSize:18,fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600}}}),da=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={selectedId:"profile",myData:null},e.handleListItemClick=e.handleListItemClick.bind(Object(p.a)(e)),e.tabLinks=["profile","panier","cms"],e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleListItemClick",value:function(e){this.setState({selectedId:e.target.id})}},{key:"componentDidMount",value:function(){var e=this.tabLinks.find(function(e){return document.location.href.includes(e)}),t=M();t?this.setState({myData:t,selectedId:e}):window.location.replace(F("web_url")+"/login")}},{key:"render",value:function(){var e=this;return this.state.myData?r.a.createElement(ua,null,function(t){var a=t.classes;return r.a.createElement(y.a,{"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"profile",className:"profile"===e.state.selectedId?K()(a.link,a.activedLink):a.link,component:o.b,to:"/espace/profile",onClick:e.handleListItemClick},"Mon profile"),r.a.createElement(b.a,{id:"panier",className:"panier"===e.state.selectedId?K()(a.link,a.activedLink):a.link,component:o.b,to:"/espace/panier",onClick:e.handleListItemClick},"Mom panier"),e.state.myData.isRoot?r.a.createElement(b.a,{id:"cms",className:"cms"===e.state.selectedId?K()(a.link,a.activedLink):a.link,component:o.b,to:"/espace/cms",onClick:e.handleListItemClick},"Gestion de contenu"):null)}):null}}]),t}(n.Component),pa=Object(s.e)(da),ha=q(function(e){return{root:{width:"100%",marginTop:e.spacing(2)},profile:{width:"60%",margin:"auto",marginTop:e.spacing(2)}}}),ga=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={first_name:"",last_name:"",email:""},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=M();e?this.setState({first_name:e.user_name,last_name:e.last_name,email:e.email}):window.location.replace(F("web_url")+"/login")}},{key:"render",value:function(){var e=this;return r.a.createElement(ha,null,function(t){var a=t.classes;return r.a.createElement("div",{className:a.root},r.a.createElement(pa,null),r.a.createElement("div",{className:a.profile},r.a.createElement(de.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(de.a,{item:!0},r.a.createElement(f.a,{variant:"h3"}," PROFILE")),r.a.createElement(de.a,{item:!0},r.a.createElement(ma.a,null,r.a.createElement(ft.a,null,"Nom :"," ",r.a.createElement(f.a,{variant:"h5"},e.state.first_name)),r.a.createElement(ft.a,null,"Pr\xe9nom :",r.a.createElement(f.a,{variant:"h5"},e.state.last_name)),r.a.createElement(ft.a,null,"Adresse mail :",r.a.createElement(f.a,{variant:"h5"},e.state.email)))))))})}}]),t}(n.Component),fa=q(function(e){return{root:{justifyContent:"center",flexWrap:"wrap",margin:e.spacing(1,0,0,2)},paper:{padding:e.spacing(1,2)}}}),Ea=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(fa,null,function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(oa,null),r.a.createElement(Je.a,{elevation:0,className:t.paper},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{color:"inherit",href:F("web_url")+"/search"}," ","Recherche"," "),r.a.createElement(f.a,{color:"textPrimary"},"Les testateurs"))),r.a.createElement("h1",null,"En cours ..."))})}}]),t}(n.Component),ya=q(function(e){return{root:{justifyContent:"center",flexWrap:"wrap",margin:e.spacing(1,0,0,2)},paper:{padding:e.spacing(1,2)}}}),ba=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(ya,null,function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(oa,null),r.a.createElement(Je.a,{elevation:0,className:t.paper},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{color:"inherit",href:F("web_url")+"/search"}," ","Recherche"," "),r.a.createElement(f.a,{color:"textPrimary"},"Les lieux"))),r.a.createElement("h1",null,"En cours ..."))})}}]),t}(n.Component),va=(Te.f.ResultListWrapper,q(function(e){return{link:{textTransform:"none",paddingLeft:15,color:"#212121",fontSize:18,fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600},linkPage:{color:"#212121",fontSize:18,fontWeight:400,"&:hover":{color:"#0091EA"}},selectedLink:{fontWeight:600,color:"#0091EA",fontSize:18}}}));function ka(e,t,a,n){for(var l=[],i={page:"Page",envelope:"Enveloppe",codicil:"Codicille"},s=function(s){console.log("page click :",t[s].page_type.type+"_"+t[s].page_type.id),l.push(r.a.createElement(va,{key:s},function(l){var c,m=l.classes;return r.a.createElement(b.a,(c={id:s,value:s,component:"button",color:"inherit"},Object(re.a)(c,"component",o.b),Object(re.a)(c,"to","/will/"+e+"/"+t[s].page_type.type+"_"+t[s].page_type.id),Object(re.a)(c,"onClick",n),Object(re.a)(c,"className",parseInt(a)===s?K()(m.typography,m.selectedLink):K()(m.linkPage,m.typography)),c),i[t[s].page_type.type]," ",t[s].page_type.id)}))},c=0;c<t.length;c++)s(c);return r.a.createElement(y.a,{style:{marginTop:20,marginBottom:20},"aria-label":"Breadcrumb"}," ",l," ")}var Ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={query_term:"",page:0},a.defaultQuery=a.defaultQuery.bind(Object(p.a)(a)),a.renderFunc=a.renderFunc.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"renderFunc",value:function(e){return e.loading?r.a.createElement("div",null,r.a.createElement("h3",null,"En chargement")):e.data.length>0?r.a.createElement("div",{className:"root"},r.a.createElement(Je.a,null,r.a.createElement(ct,{data:e.data[0],cur_page:this.state.page,createPageMenu:ka}))):r.a.createElement("div",null,r.a.createElement("h3",null,"Pas de r\xe9sultat"))}},{key:"defaultQuery",value:function(){return{query:{term:{_id:this.state.query_term}}}}},{key:"componentDidMount",value:function(){var e=document.location.href,t=e.lastIndexOf("will/");if(-1!==t){var a=e.substring(t+5).split("/");this.setState({query_term:a.length>0?a[0]:"",page:a.length>1?{type:a[1].split("_")[0],id:parseInt(a[1].split("_")[1])}:{}})}}},{key:"render",value:function(){var e=document.referrer.includes("search?")?"/search?"+document.referrer.split("?")[1]:"/search",t=""!==this.state.query_term?r.a.createElement(f.a,{color:"textPrimary",key:2},this.state.query_term):null;return r.a.createElement(Te.d,{app:F("es_index_wills"),url:F("es_host"),type:"_doc"},r.a.createElement("div",{className:"wills_menu"},r.a.createElement(Je.a,{elevation:0},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"search",key:0,color:"blue",component:o.b,to:e},"Modifier ma recherche"),t))),r.a.createElement("div",null,r.a.createElement(Te.f,{componentId:"will",stream:!0,pagination:!1,URLParams:!1,defaultQuery:this.defaultQuery,renderResultStats:function(e){return""},render:this.renderFunc})))}}]),t}(n.Component);var Sa=function(e,t){function a(e){return(0,e.children)(Object(I.a)(e,["children"]))}return a.propTypes={children:L.a.func.isRequired,classes:L.a.object.isRequired},Object(P.a)(e,t)(a)}(function(e){return{root:{padding:e.spacing(2),backgroundColor:"#616161"},text:{fontSize:24,color:"#616161"}}}),wa=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(Sa,null,function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(Je.a,null,r.a.createElement(f.a,{className:t.text},"Home page ...")))})}}]),t}(n.Component),_a=Te.f.ResultListWrapper,ja=q(function(e){return{root:{flexWrap:"wrap",margin:e.spacing(1,0,0,2)},list:{width:"60%",border:"1px solid #dadce0",margin:"auto",marginTop:e.spacing(4)},detail:{border:"1px solid #dadce0",marginTop:e.spacing(4)},item:{textAlign:"justify",padding:e.spacing(1),margin:e.spacing(1),backgroundColor:"#f5f5f5"},foot:{fontSize:14,margin:e.spacing(1)},head:{fontSize:14,margin:e.spacing(1),padding:e.spacing(1)},title:{color:"#000000",fontSize:"1.5em"},icon:{fontSize:20},menu:{marginTop:e.spacing(4),fontSize:14,textAlign:"justify",display:"block",verticalAlign:"middle"},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600}}}),xa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={lastArticles:[],selectedId:"",item:null},a.handleMoreClick=a.handleMoreClick.bind(Object(p.a)(a)),a.defaultQuery=a.defaultQuery.bind(Object(p.a)(a)),a.handleListItemClick=a.handleListItemClick.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleListItemClick",value:function(e){var t=this.state.lastArticles.find(function(t){return t._id===e.target.id});this.setState({selectedId:e.target.id,item:t?t._source:this.state.item})}},{key:"handleMoreClick",value:function(e){return function(t){document.location.href=F("web_url")+"/articles/"+e._id}.bind(this)}},{key:"defaultQuery",value:function(){return{query:{term:{type:1}}}}},{key:"componentDidUpdate",value:function(){-1===document.location.href.lastIndexOf("articles/")&&Boolean(this.state.item)&&this.setState({item:null})}},{key:"componentDidMount",value:function(){var e=document.location.href,t=e.lastIndexOf("articles/"),a=U(F("es_host")+"/"+F("es_index_cms"),JSON.stringify({size:5,query:{term:{type:1}},sort:[{created:{order:"desc"}}]}));if(-1!==t){var n=e.substring(t+9).split("/"),r=U(F("es_host")+"/"+F("es_index_cms"),JSON.stringify({query:{term:{_id:n[0]}}}));this.setState({lastArticles:a,selectedId:r.length>0?r[0]._id:a[0]._id,item:r.length>0?r[0]._source:null})}}},{key:"render",value:function(){var e=this,t=document.referrer.includes("search?")?"/search?"+document.referrer.split("?")[1]:"/search",a=Boolean(this.state.item)?[r.a.createElement(b.a,{id:"articles",key:1,color:"inherit",component:o.b,to:"/articles"}," ","L'\xe9tat de l'art"," "),r.a.createElement(f.a,{key:2,color:"textPrimary"},this.state.item.title)]:r.a.createElement(b.a,{id:"articles",key:1,color:"textPrimary",component:o.b,to:"/articles"}," ","L'\xe9tat de l'art"," "),n=r.a.createElement(Je.a,{elevation:0},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"search",key:0,color:"inherit",component:o.b,to:t}," ","Recherche"," "),a)),l=r.a.createElement(ja,null,function(t){var a=t.classes;return r.a.createElement(Je.a,{className:a.menu},r.a.createElement(f.a,null,"Les derni\xe8res articles :"),r.a.createElement($t.a,null,e.state.lastArticles.map(function(t,n){return r.a.createElement(C.a,{key:n},r.a.createElement(b.a,{id:t._id,className:e.state.selectedId===t._id?K()(a.link,a.activedLink):a.link,component:o.b,to:"/articles/"+t._id,onClick:e.handleListItemClick},t._source.title))})))}),i=Boolean(this.state.item)?new Date(this.state.item.created):null;return r.a.createElement(ja,null,function(t){var a=t.classes;return Boolean(e.state.item)?r.a.createElement("div",{id:"root",className:a.root},n,r.a.createElement(de.a,{container:!0,direction:"row",spacing:2},r.a.createElement(de.a,{item:!0,xs:4},l),r.a.createElement(de.a,{item:!0,xs:8},r.a.createElement("div",{className:a.detail},r.a.createElement(Je.a,{className:a.item,key:0},r.a.createElement(f.a,{className:a.title}," ",e.state.item.title," "),r.a.createElement(Je.a,{className:a.head},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},e.state.item.author),r.a.createElement(de.a,{item:!0},Boolean(i)?"Mise \xe0 jour le "+i.toLocaleDateString()+" \xe0 "+i.toLocaleTimeString():""))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:""!==e.state.item.detail?e.state.item.detail:e.state.item.summary}})))))):r.a.createElement(Te.d,{app:F("es_index_cms"),url:F("es_host"),type:"_doc"},r.a.createElement("div",{id:"root",className:a.root},n,r.a.createElement("div",{className:a.list},r.a.createElement(Te.f,{dataField:"created",componentId:"articles_id",stream:!0,pagination:!1,paginationAt:"bottom",size:5,pages:10,sortBy:"desc",showEndPage:!1,renderResultStats:function(e){return r.a.createElement("h6",null,e.numberOfResults," articles")},URLParams:!1,defaultQuery:e.defaultQuery},function(t){var n=t.data;t.error,t.loading;return r.a.createElement(_a,null,n.map(function(t,n){var l=new Date(t.created);return r.a.createElement(Je.a,{className:a.item,key:n},r.a.createElement(f.a,{className:a.title}," ",t.title," "),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:""!==t.summary?t.summary:t.detail}}),r.a.createElement(Je.a,{className:a.foot},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},t.author),r.a.createElement(de.a,{item:!0},"Mise \xe0 jour le ",l.toLocaleDateString()," \xe0 ",l.toLocaleTimeString()),r.a.createElement(de.a,{item:!0},r.a.createElement(_.a,{"aria-label":"More",onClick:e.handleMoreClick(t)},r.a.createElement(ta.a,null))))))}))}))))})}}]),t}(n.Component),Oa=a(3),Na=a(15),Ia=a(693),Aa=a(694),La=a(691),Pa=a(689),Ta=a(706),Wa=a(690),Da=a(705),Ba=a(692),Ma=a(698),Fa=a(163),Ra=a.n(Fa),za=a(299),Ua=a.n(za),qa=a(284),Ha=a(695),Qa=a(161),Va=a.n(Qa),Ja=a(34),Xa=a(105),Za=a(88),Ga=a.n(Za),$a=(a(282),a(159)),Ka=a.n($a),Ya=q(function(e){return{root:{width:"60%",margin:"auto"},paper:{margin:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center"},demoEditor:{height:"15em",backgroundColor:"#FAFAFA"},submit:{margin:e.spacing(3,0,2)},header:{display:"flex",color:"#0d47a1",fontSize:24,fontWeight:600,fontFamily:"-apple-system",margin:e.spacing(2,0,3)},title:{display:"flex",margin:e.spacing(3,0,0),color:"#1a1a1a",fontSize:18,fontWeight:600,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},input:{display:"none"},img:{width:"4em",height:"4em"},type:{display:"flex",width:"10em",margin:e.spacing(3,0,3)}}});function en(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("POST","https://api.imgur.com/3/image"),n.setRequestHeader("Authorization","Client-ID XXXXX");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",function(){var e=JSON.parse(n.responseText);t(e)}),n.addEventListener("error",function(){var e=JSON.parse(n.responseText);a(e)})})}var tn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).handleTypeChange=function(e){a.setState({type:e.target.value})},a.onEditorStateResumeChange=function(e){a.setState({editorStateResume:e})},a.onEditorStateDetailChange=function(e){a.setState({editorStateDetail:e})},a.handleFileChange=function(e){if(console.log("file input :",e.target.files[0]),e.target.files[0]){var t=new FileReader,n=e.target.files[0],r=e.target.files[0].name;t.onloadend=function(e){this.setState({in_image:e.target.result,url_image:r,out_image:"",fileInput:n,label:""})}.bind(Object(p.a)(a)),t.readAsDataURL(e.target.files[0])}},a.handleChangeText=function(e){a.setState({url_image:e.target.value,in_image:null})},a.onChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=Object(Ja.convertToRaw)(a.state.editorStateDetail.getCurrentContent()),n=Object(Ja.convertToRaw)(a.state.editorStateResume.getCurrentContent()),r=t.blocks.find(function(e){return e.text.trim().length>0}),l=n.blocks.find(function(e){return e.text.trim().length>0});if(a.state.title){var i={title:a.state.title,summary:Boolean(l)?Ga()(n):"",detail:Boolean(r)?Ga()(t):"",type:a.state.type,author:a.state.author};J(i).then(function(e){200===e.status?a.setState({openAlert:!0,message:e.mess}):a.setState({openAlert:!0,message:e.err})})}},a.handleAlertClose=function(e){a.setState({openAlert:!1,message:""})},a.state={editorStateDetail:Ja.EditorState.createEmpty(),editorStateResume:Ja.EditorState.createEmpty(),title:"",fileInput:null,label:null,in_image:null,url_image:"",type:1,author:"",message:"",openAlert:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=null;return this.state.in_image?t=this.state.in_image:this.state.url_image&&(t=this.state.url_image),r.a.createElement(Ya,null,function(a){var n=a.classes;return r.a.createElement("div",{className:n.root},r.a.createElement(Je.a,{className:n.paper},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},e.props.backButton),r.a.createElement(de.a,{item:!0,xs:6},r.a.createElement(f.a,{className:n.header,id:"postTitle"},"Ajouter un nouveau post"))),r.a.createElement("form",{className:n.form,noValidate:!0,onSubmit:e.onSubmit},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0,xs:6},r.a.createElement(ie.a,{id:"author",variant:"outlined",fullWidth:!0,label:"Auteur",type:"author",name:"author",autoFocus:!0,value:e.state.author,onChange:e.onChange})),r.a.createElement(de.a,{item:!0},r.a.createElement(qa.a,{id:"type",className:n.type,variant:"outlined",value:e.state.type,name:"type",onChange:e.handleTypeChange},r.a.createElement("option",{value:1},"Article"),r.a.createElement("option",{value:2},"Actualit\xe9"),r.a.createElement("option",{value:3},"A propos")))),r.a.createElement(ie.a,{id:"title",variant:"outlined",fullWidth:!0,label:"Titre",type:"title",name:"title",autoFocus:!0,value:e.state.title,onChange:e.onChange}),r.a.createElement("input",{accept:"image/*",className:n.input,id:"contained-button-file",type:"file",onChange:e.handleFileChange}),r.a.createElement(de.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(de.a,{item:!0},r.a.createElement(ie.a,{id:"outlined-full-width",label:"Image",placeholder:"Copie url image ici",margin:"normal",variant:"outlined",onChange:e.handleChangeText,name:"file",value:e.state.url_image,InputProps:{endAdornment:r.a.createElement(oe.a,{position:"end"},r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(v.a,{component:"span",className:n.button},r.a.createElement(Ka.a,{className:n.rightIcon}))))}})),r.a.createElement(de.a,{item:!0},t?r.a.createElement("img",{src:t,id:"img",alt:"toto",className:n.img}):"")),r.a.createElement("div",null,r.a.createElement(f.a,{className:n.title},"R\xe9sum\xe9"),r.a.createElement(Xa.Editor,{id:"editorStateResume",editorStateResume:e.state.editorStateResume,wrapperClassName:n.demoWrapper,editorClassName:n.demoEditor,onEditorStateChange:e.onEditorStateResumeChange,toolbar:{image:{uploadCallback:en,alt:{present:!0,mandatory:!0}}}})),r.a.createElement("div",null,r.a.createElement(f.a,{className:n.title},"Contenu"),r.a.createElement(Xa.Editor,{id:"editorStateDetail",editorStateDetail:e.state.editorStateDetail,wrapperClassName:n.demoWrapper,editorClassName:n.demoEditor,onEditorStateChange:e.onEditorStateDetailChange,toolbar:{image:{uploadCallback:en,alt:{present:!0,mandatory:!0}}}})),r.a.createElement(v.a,{id:"btPublication",variant:"contained",color:"primary",className:n.submit,type:"submit"},"Publier"))),r.a.createElement(e.props.alertMessage,{message:e.state.message,openAlert:e.state.openAlert,handleClose:e.handleAlertClose}))})}}]),t}(n.Component),an=a(162),nn=a.n(an),rn=q(function(e){return{root:{width:"60%",margin:"auto"},paper:{margin:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"center"},demoEditor:{height:"15em",backgroundColor:"#FAFAFA"},submit:{margin:e.spacing(3,0,2)},header:{display:"flex",color:"#0d47a1",fontSize:24,fontWeight:600,fontFamily:"-apple-system",margin:e.spacing(2,0,3)},title:{display:"flex",margin:e.spacing(3,0,0),color:"#1a1a1a",fontSize:18,fontWeight:600,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},input:{display:"none"},img:{width:"4em",height:"4em"},type:{display:"flex",width:"10em",margin:e.spacing(3,0,3)}}});function ln(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("POST","https://api.imgur.com/3/image"),n.setRequestHeader("Authorization","Client-ID XXXXX");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",function(){var e=JSON.parse(n.responseText);t(e)}),n.addEventListener("error",function(){var e=JSON.parse(n.responseText);a(e)})})}var on=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).handleTypeChange=function(e){a.setState({type:e.target.value})},a.onEditorStateResumeChange=function(e){console.log("editorState :",Ga()(e)),a.setState({editStateSummary:e})},a.onEditorStateDetailChange=function(e){a.setState({editStateDetail:e})},a.handleFileChange=function(e){if(e.target.files[0]){var t=new FileReader,n=e.target.files[0],r=e.target.files[0].name;t.onloadend=function(e){this.setState({in_image:e.target.result,url_image:r,out_image:"",fileInput:n,label:""})}.bind(Object(p.a)(a)),t.readAsDataURL(e.target.files[0])}},a.handleChangeText=function(e){a.setState({url_image:e.target.value,in_image:null})},a.onChange=function(e){a.setState(Object(re.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state.editStateDetail.hasOwnProperty("blocks")?a.state.editStateDetail:Object(Ja.convertToRaw)(a.state.editStateDetail.getCurrentContent()),n=a.state.editStateSummary.hasOwnProperty("blocks")?a.state.editStateSummary:Object(Ja.convertToRaw)(a.state.editStateSummary.getCurrentContent()),r=t.blocks.find(function(e){return e.text.trim().length>0}),l=n.blocks.find(function(e){return e.text.trim().length>0});if(a.state.title){var i={id:a.props.data._id,title:a.state.title,summary:Boolean(l)?Ga()(n):"",detail:Boolean(r)?Ga()(t):"",type:a.state.type,author:a.state.author};Z(i).then(function(e){console.log("res dans editPost :",e),200===e.status?a.setState({openAlert:!0,message:e.mess}):a.setState({openAlert:!0,message:e.err})})}},a.handleAlertClose=function(e){a.setState({openAlert:!1,message:""})};var n=Ja.ContentState.createFromBlockArray(Object(Ja.convertFromHTML)(e.data._source.detail)),r=Ja.ContentState.createFromBlockArray(Object(Ja.convertFromHTML)(e.data._source.summary));return a.state={editStateDetail:e.data._source.detail.length>0?Ja.EditorState.createWithContent(n):Ja.EditorState.createEmpty(),editStateSummary:e.data._source.summary.length>0?Ja.EditorState.createWithContent(r):Ja.EditorState.createEmpty(),author:e.data._source.author,title:e.data._source.title,fileInput:null,label:null,in_image:null,url_image:"",type:e.data._source.type,message:"",openAlert:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({author:this.props.data._source.author,title:this.props.data._source.title})}},{key:"render",value:function(){var e=this,t=null;return this.state.in_image?t=this.state.in_image:this.state.url_image&&(t=this.state.url_image),console.log("alert ",this.state.openAlert," | ",this.state.message),r.a.createElement(rn,null,function(a){var n=a.classes;return r.a.createElement("div",{className:n.root},r.a.createElement(Je.a,{className:n.paper},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0},e.props.backButton),r.a.createElement(de.a,{item:!0,xs:6},r.a.createElement(f.a,{className:n.header,id:"postTitle"},"Ajouter un nouveau post"))),r.a.createElement("form",{className:n.form,noValidate:!0,onSubmit:e.onSubmit},r.a.createElement(de.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(de.a,{item:!0,xs:6},r.a.createElement(ie.a,{id:"author",variant:"outlined",fullWidth:!0,label:"Auteur",type:"author",name:"author",autoFocus:!0,value:e.state.author,onChange:e.onChange})),r.a.createElement(de.a,{item:!0},r.a.createElement(qa.a,{id:"type",className:n.type,variant:"outlined",value:e.state.type,name:"type",onChange:e.handleTypeChange},r.a.createElement("option",{value:1},"Article"),r.a.createElement("option",{value:2},"Actualit\xe9"),r.a.createElement("option",{value:3},"A propos")))),r.a.createElement(ie.a,{id:"title",variant:"outlined",fullWidth:!0,label:"Titre",type:"title",name:"title",autoFocus:!0,value:e.state.title,onChange:e.onChange}),r.a.createElement("input",{accept:"image/*",className:n.input,id:"contained-button-file",type:"file",onChange:e.handleFileChange}),r.a.createElement(de.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(de.a,{item:!0},r.a.createElement(ie.a,{id:"outlined-full-width",label:"Image",placeholder:"Copie url image ici",margin:"normal",variant:"outlined",onChange:e.handleChangeText,name:"file",value:e.state.url_image,InputProps:{endAdornment:r.a.createElement(oe.a,{position:"end"},r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(v.a,{component:"span",className:n.button},r.a.createElement(Ka.a,{className:n.rightIcon}))))}})),r.a.createElement(de.a,{item:!0},t?r.a.createElement("img",{src:t,id:"img",alt:"toto",className:n.img}):"")),r.a.createElement("div",null,r.a.createElement(f.a,{className:n.title},"R\xe9sum\xe9"),r.a.createElement(Xa.Editor,{id:"editSummary_id",defaultEditorState:e.state.editStateSummary,wrapperClassName:n.demoWrapper,editorClassName:n.demoEditor,onChange:e.onEditorStateResumeChange,toolbar:{image:{uploadCallback:ln,alt:{present:!0,mandatory:!0}}}})),r.a.createElement("div",null,r.a.createElement(f.a,{className:n.title},"Contenu"),r.a.createElement(Xa.Editor,{id:"editDetail_id",defaultEditorState:e.state.editStateDetail,wrapperClassName:n.demoWrapper,editorClassName:n.demoEditor,onChange:e.onEditorStateDetailChange,toolbar:{image:{uploadCallback:ln,alt:{present:!0,mandatory:!0}}}})),r.a.createElement(v.a,{id:"btPublication",variant:"contained",color:"primary",className:n.submit,type:"submit"},"Editer"))),r.a.createElement(e.props.alertMessage,{message:e.state.message,openAlert:e.state.openAlert,handleClose:e.handleAlertClose}))})}}]),t}(n.Component);function sn(e,t,a){return t._source[a]<e._source[a]?-1:t._source[a]>e._source[a]?1:0}var cn=[{id:"title",numeric:!1,disablePadding:!1,label:"Titre"},{id:"author",numeric:!1,disablePadding:!1,label:"Auteur"}];function mn(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,i=e.numSelected,o=e.rowCount,s=e.onRequestSort;return r.a.createElement(Pa.a,null,r.a.createElement(Wa.a,null,r.a.createElement(La.a,{padding:"checkbox"},r.a.createElement(Ma.a,{indeterminate:i>0&&i<o,checked:i===o,onChange:a,inputProps:{"aria-label":"select all desserts"}})),cn.map(function(e){return r.a.createElement(La.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement(Da.a,{active:l===e.id,direction:n,onClick:(a=e.id,function(e){s(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a})))}var un=q(function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Na.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%",color:"#0d47a1",fontSize:24,fontWeight:600,fontFamily:"-apple-system",margin:e.spacing(2,0,3)}}}),dn=function(e){var t=e.numSelected,a=e.selectComponent,n=e.addButton,l=e.deleteButton;return r.a.createElement(un,null,function(e){var i=e.classes;return r.a.createElement(Ba.a,{className:Object(Oa.a)(i.root,Object(re.a)({},i.highlight,t>0))},0===t?n:null,t>0?r.a.createElement(f.a,{className:i.title,color:"inherit",variant:"subtitle1"},t," s\xe9lectionn\xe9s"):r.a.createElement(f.a,{className:i.title,variant:"h6",id:"tableTitle"},"Gestion de contenu"),t>0?l:a)})},pn=function(e){var t=e.openAlert,a=e.handleClose,n=e.message;return r.a.createElement(ht.a,{anchorOrigin:{vertical:"top",horizontal:"center"},key:"topCenter",open:t,onClose:a,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},n)})},hn=q(function(e){return{root:{width:"100%",marginTop:e.spacing(2)},paper:{width:"60%",margin:"auto",marginTop:e.spacing(2)},table:{minWidth:750},tableWrapper:{overflowX:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},backBt:{color:"#fff",backgroundColor:"#1976d2"},addBt:{color:"#0d47a1",fontSize:35},typeSelect:{display:"flex",width:"10em",margin:e.spacing(3,0,3)}}}),gn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).handleRequestSort=function(e,t){var n=a.state.orderBy===t&&"desc"===a.state.order;a.setState({order:n?"asc":"desc",orderBy:t})},a.handleSelectAllClick=function(e){if(e.target.checked){var t=a.state.selectData.map(function(e){return e._id});a.setState({selected:t})}else a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected.indexOf(t),r=[];-1===n?r=r.concat(a.state.selected,t):0===n?r=r.concat(a.state.selected.slice(1)):n===a.state.selected.length-1?r=r.concat(a.state.selected.slice(0,-1)):n>0&&(r=r.concat(a.state.selected.slice(0,n),a.state.selected.slice(n+1))),a.setState({selected:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:parseInt(e.target.value,10),page:0})},a.handleTypeChange=function(e){var t=a.state.data.filter(function(t){return parseInt(t._source.type,10)===parseInt(e.target.value,10)});console.log("newSelectData :",t),a.setState({type:e.target.value,selectData:t})},a.handleAddNewPost=function(e){a.setState({choice:0})},a.handleBackToManager=function(e){document.location.reload()},a.handleRemovePost=function(e){a.setState({open:!0})},a.handleDialogClose=function(e){a.setState({open:!1})},a.handleDialogConfirm=function(e){e.preventDefault(),X(a.state.selected).then(function(e){200===e.status?a.setState({open:!1,openAlert:!0,mess:e.mess}):a.setState({open:!1,openAlert:!0,mess:e.err})})},a.handleAlertClose=function(e){document.location.reload()},a.handleUpdatePost=function(e){return function(t){this.setState({choice:1,editData:e})}.bind(Object(p.a)(a))},a.state={order:"asc",orderBy:"title",selected:[],page:0,rowsPerPage:5,data:[],selectData:[],type:1,choice:2,open:!1,openAlert:!1,mess:"",editData:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t||z(e),n="object"===typeof a?a.value:a;return JSON.parse(R(e+"/_search?size="+n)).hits.hits}(F("es_host")+"/"+F("es_index_cms")),a=t.filter(function(t){return t._source.type===e.state.type});this.setState({data:t,selectData:a})}},{key:"render",value:function(){var e=this,t=this.state.rowsPerPage-Math.min(this.state.rowsPerPage,this.state.selectData.length-this.state.page*this.state.rowsPerPage),a=r.a.createElement(hn,null,function(t){var a=t.classes;return r.a.createElement(qa.a,{id:"type",className:a.typeSelect,variant:"outlined",value:e.state.type,name:"type",onChange:e.handleTypeChange},r.a.createElement("option",{value:1},"Article"),r.a.createElement("option",{value:2},"Actualit\xe9"),r.a.createElement("option",{value:3},"A propos"))}),n=r.a.createElement(hn,null,function(t){var a=t.classes;return r.a.createElement(Be.a,{title:"Ajouter un nouveau post"},r.a.createElement(_.a,{onClick:e.handleAddNewPost,"aria-label":"add"},r.a.createElement(Va.a,{className:a.addBt})))}),l=r.a.createElement(hn,null,function(t){var a=t.classes;return r.a.createElement(Be.a,{title:"Retour dans gestion de contenu"},r.a.createElement(v.a,{variant:"contained",onClick:e.handleBackToManager,startIcon:r.a.createElement(nn.a,null),className:a.backBt},"Gestion de contenu"))}),i=r.a.createElement(Be.a,{title:"Suppression de contenu"},r.a.createElement(_.a,{onClick:this.handleRemovePost,"aria-label":"delete"},r.a.createElement(Ra.a,null))),o=r.a.createElement(hn,null,function(l){var o,s,c=l.classes;return r.a.createElement("div",{className:c.root},r.a.createElement(pa,null),r.a.createElement(Je.a,{className:c.paper},r.a.createElement(dn,{numSelected:e.state.selected.length,selectComponent:a,addButton:n,deleteButton:i}),r.a.createElement("div",{className:c.tableWrapper},r.a.createElement(Ia.a,{className:c.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(mn,{classes:c,numSelected:e.state.selected.length,order:e.state.order,orderBy:e.state.orderBy,onSelectAllClick:e.handleSelectAllClick,onRequestSort:e.handleRequestSort,rowCount:e.state.selectData.length}),r.a.createElement(Aa.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(e.state.selectData,(o=e.state.order,s=e.state.orderBy,"desc"===o?function(e,t){return sn(e,t,s)}:function(e,t){return-sn(e,t,s)})).slice(e.state.page*e.state.rowsPerPage,e.state.page*e.state.rowsPerPage+e.state.rowsPerPage).map(function(t,a){var n,l=(n=t._id,-1!==e.state.selected.indexOf(n)),i="enhanced-table-checkbox-".concat(a);return r.a.createElement(Wa.a,{hover:!0,onClick:function(a){return e.handleClick(a,t._id)},role:"checkbox","aria-checked":l,tabIndex:-1,key:t._id,selected:l},r.a.createElement(La.a,{padding:"checkbox"},r.a.createElement(Ma.a,{checked:l,inputProps:{"aria-labelledby":i}})),r.a.createElement(La.a,{component:"th",id:i,scope:"row",padding:"none"},t._source.title),r.a.createElement(La.a,{align:"left"},t._source.author),r.a.createElement(La.a,{align:"center"},r.a.createElement(Be.a,{title:"Mise \xe0 jour du contenu"},r.a.createElement(_.a,{onClick:e.handleUpdatePost(t),"aria-label":"update"},r.a.createElement(Ua.a,null)))))}),t>0&&r.a.createElement(Wa.a,{style:{height:53*t}},r.a.createElement(La.a,{colSpan:6}))))),r.a.createElement(Ta.a,{rowsPerPageOptions:[5,10,25],component:"div",count:e.state.selectData.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,labelRowsPerPage:"Lignes par page :"})),r.a.createElement(S.a,{open:e.state.open,onClose:e.handleDialogClose,"aria-labelledby":"draggable-dialog-title"},r.a.createElement(w.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"Confirmation"),r.a.createElement(j.a,null,r.a.createElement(Ha.a,null,"Souhaitez-vous vraiment supprimer les"," ",e.state.selected.length," \xe9l\xe9ments s\xe9lectionn\xe9s ?")),r.a.createElement(pt.a,null,r.a.createElement(v.a,{autoFocus:!0,onClick:e.handleDialogClose,color:"primary"},"Annuler"),r.a.createElement(v.a,{onClick:e.handleDialogConfirm,color:"primary"},"Supprimer"))),r.a.createElement(pn,{message:e.state.mess,openAlert:e.state.openAlert,handleClose:e.handleAlertClose}))});switch(this.state.choice){case 0:this.curView=r.a.createElement(tn,{backButton:l,alertMessage:pn});break;case 1:this.curView=r.a.createElement(on,{backButton:l,alertMessage:pn,data:this.state.editData});break;case 2:default:this.curView=o}return this.curView}}]),t}(n.Component),fn=a(300),En=a.n(fn);function yn(e,t,a){return t._source[a]<e._source[a]?-1:t._source[a]>e._source[a]?1:0}var bn=[{id:"will_identifier.name",numeric:!1,disablePadding:!1,label:"Nom de testateur"}];function vn(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,i=e.numSelected,o=e.rowCount,s=e.onRequestSort;return r.a.createElement(Pa.a,null,r.a.createElement(Wa.a,null,r.a.createElement(La.a,{padding:"checkbox"},r.a.createElement(Ma.a,{indeterminate:i>0&&i<o,checked:i===o,onChange:a,inputProps:{"aria-label":"select all desserts"}})),bn.map(function(e){return r.a.createElement(La.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement(Da.a,{active:l===e.id,direction:n,onClick:(a=e.id,function(e){s(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a})))}var kn=q(function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Na.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%",color:"#0d47a1",fontSize:24,fontWeight:600,fontFamily:"-apple-system",margin:e.spacing(2,0,3)}}}),Cn=function(e){var t=e.numSelected,a=e.addButton,n=e.actionButton;return r.a.createElement(kn,null,function(e){var l=e.classes;return r.a.createElement(Ba.a,{className:Object(Oa.a)(l.root,Object(re.a)({},l.highlight,t>0))},0===t?a:null,t>0?r.a.createElement(f.a,{className:l.title,color:"inherit",variant:"subtitle1"},t," s\xe9lectionn\xe9s"):r.a.createElement(f.a,{className:l.title,variant:"h6",id:"tableTitle"},"Mes testaments"),t>0?n:null)})},Sn=function(e){var t=e.openAlert,a=e.handleClose,n=e.message;return r.a.createElement(ht.a,{anchorOrigin:{vertical:"top",horizontal:"center"},key:"topCenter",open:t,onClose:a,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},n)})},wn=q(function(e){return{root:{width:"100%",marginTop:e.spacing(2)},paper:{width:"60%",margin:"auto",marginTop:e.spacing(2)},table:{minWidth:750},tableWrapper:{overflowX:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},backBt:{color:"#fff",backgroundColor:"#1976d2"},addBt:{color:"#0d47a1",fontSize:35},typeSelect:{display:"flex",width:"10em",margin:e.spacing(3,0,3)}}}),_n=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).handleRequestSort=function(e,t){var n=a.state.orderBy===t&&"desc"===a.state.order;a.setState({order:n?"asc":"desc",orderBy:t})},a.handleSelectAllClick=function(e){if(e.target.checked){var t=a.state.data.map(function(e){return e._id});a.setState({selected:t})}else a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected.indexOf(t),r=[];-1===n?r=r.concat(a.state.selected,t):0===n?r=r.concat(a.state.selected.slice(1)):n===a.state.selected.length-1?r=r.concat(a.state.selected.slice(0,-1)):n>0&&(r=r.concat(a.state.selected.slice(0,n),a.state.selected.slice(n+1))),a.setState({selected:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:parseInt(e.target.value,10),page:0})},a.handleAddNewPost=function(e){a.setState({choice:0})},a.handleBackToManager=function(e){document.location.reload()},a.handleRemoveWill=function(e){a.setState({open:!0})},a.handleDialogClose=function(e){a.setState({open:!1})},a.handleDialogConfirm=function(e){e.preventDefault();var t=sessionStorage.myWills.split(",").filter(function(e){return!a.state.selected.includes(e)}),n={email:a.userToken.email,myWills:t};G(n).then(function(e){if(200===e.status)a.setState({open:!1,openAlert:!0,mess:"Vos \xe9l\xe9ments s\xe9lectionn\xe9s ont \xe9t\xe9 supprim\xe9s !"}),sessionStorage.setItem("myWills",t);else{var n=e.err?e.err:"Connexion au serveur a \xe9chou\xe9 !";a.setState({open:!1,openAlert:!0,mess:n})}})},a.handleAlertClose=function(e){document.location.reload()},a.handleDisplayWill=function(e){return function(t){window.location.href=F("web_url")+"/will/"+e}},a.handleCompareWill=function(e){window.location.href=F("web_url")+"/compare/"+a.state.selected.join("+")},a.state={order:"asc",orderBy:"title",selected:[],page:0,rowsPerPage:5,data:[],choice:2,open:!1,openAlert:!1,mess:"",editData:null},a.userToken=M(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.myWills.length>0?U(F("es_host")+"/"+F("es_index_wills"),JSON.stringify({query:{ids:{values:sessionStorage.myWills.split(",")}}})):[];this.setState({data:e})}},{key:"render",value:function(){var e=this,t=this.state.rowsPerPage-Math.min(this.state.rowsPerPage,this.state.data.length-this.state.page*this.state.rowsPerPage),a=r.a.createElement(wn,null,function(t){var a=t.classes;return r.a.createElement(Be.a,{title:"Ajouter un nouveau post"},r.a.createElement(_.a,{onClick:e.handleAddNewPost,"aria-label":"add"},r.a.createElement(Va.a,{className:a.addBt})))}),n=r.a.createElement(wn,null,function(t){var a=t.classes;return r.a.createElement(Be.a,{title:"Retour dans gestion de contenu"},r.a.createElement(v.a,{variant:"contained",onClick:e.handleBackToManager,startIcon:r.a.createElement(nn.a,null),className:a.backBt},"Gestion de contenu"))}),l=r.a.createElement(de.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(de.a,{item:!0},r.a.createElement(Be.a,{title:"Suppression de stestaments"},r.a.createElement(_.a,{onClick:this.handleRemoveWill,"aria-label":"delete"},r.a.createElement(Ra.a,null)))),r.a.createElement(de.a,{item:!0},r.a.createElement(Be.a,{title:"Export des testament"},r.a.createElement(_.a,{onClick:this.handleExportWill,"aria-label":"export"},r.a.createElement(it.a,null)))),r.a.createElement(de.a,{item:!0},r.a.createElement(Be.a,{title:"Comparer des testaments"},r.a.createElement(_.a,{onClick:this.handleCompareWill,"aria-label":"compare"},r.a.createElement(ze.a,null))))),i=r.a.createElement(wn,null,function(n){var i,o,s=n.classes;return r.a.createElement("div",{className:s.root},r.a.createElement(pa,null),r.a.createElement(Je.a,{className:s.paper},r.a.createElement(Cn,{numSelected:e.state.selected.length,addButton:a,actionButton:l}),r.a.createElement("div",{className:s.tableWrapper},r.a.createElement(Ia.a,{className:s.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(vn,{classes:s,numSelected:e.state.selected.length,order:e.state.order,orderBy:e.state.orderBy,onSelectAllClick:e.handleSelectAllClick,onRequestSort:e.handleRequestSort,rowCount:e.state.data.length}),r.a.createElement(Aa.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(e.state.data,(i=e.state.order,o=e.state.orderBy,"desc"===i?function(e,t){return yn(e,t,o)}:function(e,t){return-yn(e,t,o)})).slice(e.state.page*e.state.rowsPerPage,e.state.page*e.state.rowsPerPage+e.state.rowsPerPage).map(function(t,a){var n,l=(n=t._id,-1!==e.state.selected.indexOf(n)),i="enhanced-table-checkbox-".concat(a);return r.a.createElement(Wa.a,{hover:!0,onClick:function(a){return e.handleClick(a,t._id)},role:"checkbox","aria-checked":l,tabIndex:-1,key:t._id,selected:l},r.a.createElement(La.a,{padding:"checkbox"},r.a.createElement(Ma.a,{checked:l,inputProps:{"aria-labelledby":i}})),r.a.createElement(La.a,{component:"th",id:i,scope:"row",padding:"none"},t._source["will_identifier.name"].replace("Testament de","")),r.a.createElement(La.a,{align:"center"},r.a.createElement(Be.a,{title:"Afficher le testatement"},r.a.createElement(_.a,{onClick:e.handleDisplayWill(t._id),"aria-label":"display"},r.a.createElement(En.a,null)))))}),t>0&&r.a.createElement(Wa.a,{style:{height:53*t}},r.a.createElement(La.a,{colSpan:6}))))),r.a.createElement(Ta.a,{rowsPerPageOptions:[5,10,25],component:"div",count:e.state.data.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,labelRowsPerPage:"Lignes par page :"})),r.a.createElement(S.a,{open:e.state.open,onClose:e.handleDialogClose,"aria-labelledby":"draggable-dialog-title"},r.a.createElement(w.a,{style:{cursor:"move"},id:"draggable-dialog-title"},"Confirmation"),r.a.createElement(j.a,null,r.a.createElement(Ha.a,null,"Souhaitez-vous vraiment supprimer les"," ",e.state.selected.length," \xe9l\xe9ments s\xe9lectionn\xe9s ?")),r.a.createElement(pt.a,null,r.a.createElement(v.a,{autoFocus:!0,onClick:e.handleDialogClose,color:"primary"},"Annuler"),r.a.createElement(v.a,{onClick:e.handleDialogConfirm,color:"primary"},"Supprimer"))),r.a.createElement(Sn,{message:e.state.mess,openAlert:e.state.openAlert,handleClose:e.handleAlertClose}))});switch(this.state.choice){case 0:this.curView=r.a.createElement(tn,{backButton:n,alertMessage:Sn});break;case 1:this.curView=r.a.createElement(on,{backButton:n,alertMessage:Sn,data:this.state.editData});break;case 2:default:this.curView=i}return this.curView}}]),t}(n.Component),jn=(q(function(e){return{root:{width:"100%",marginTop:e.spacing(2)},menu:{display:"flex"},link:{textTransform:"none",paddingLeft:15,color:"#212121",fontSize:18,fontWeight:500,fontFamily:"-apple-system","&:hover, &:focus":{color:"#0091EA",fontWeight:600,backgroundColor:"#eceff1"},"&:active":{color:"#0091EA",fontWeight:600}},activedLink:{color:"#0091EA",fontWeight:600}}}),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(ga,null)}}]),t}(n.Component)),xn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={data:[],ids_term:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=document.location.href,t=e.lastIndexOf("compare/");if(-1!==t){var a=e.substring(t+8);if(a.length>0){var n=a.split("+"),r=U(F("es_host")+"/"+F("es_index_wills"),JSON.stringify({query:{ids:{values:n}}})).map(function(e){return{will:e._source.will_pages,id:e._id,name:e._source.testator_name}});console.log("dataFilter :",r),this.setState({data:r,ids_term:a})}}}},{key:"render",value:function(){var e=document.referrer.includes("search?")?"/search?"+document.referrer.split("?")[1]:"/search",t=""!==this.state.ids_term?r.a.createElement(f.a,{color:"textPrimary",key:2},this.state.ids_term):null;return r.a.createElement("div",null,r.a.createElement("div",{className:"wills_menu"},r.a.createElement(Je.a,{elevation:0},r.a.createElement(y.a,{separator:r.a.createElement(Gt.a,{fontSize:"small"}),"aria-label":"Breadcrumb"},r.a.createElement(b.a,{id:"search",key:0,color:"inherit",component:o.b,to:e}," ","Recherche"," "),t))),r.a.createElement("div",null,this.state.data.length>0?r.a.createElement(bt,{data:this.state.data}):r.a.createElement("h3",null,"Pas de testaments \xe0 comparer")))}}]),t}(n.Component);var On=function(){return r.a.createElement(o.a,{basename:"/testaments-de-poilus"},r.a.createElement("div",{className:"App"},r.a.createElement(Pe,null),r.a.createElement(s.a,{exact:!0,path:"/",component:Xt}),r.a.createElement(s.a,{exact:!0,path:"/search",component:Xt}),r.a.createElement(s.a,{path:"/news",component:ra}),r.a.createElement(s.a,{path:"/articles",component:xa}),r.a.createElement(s.a,{path:"/about",component:Yt}),r.a.createElement(s.a,{path:"/wills",component:ca}),r.a.createElement(s.a,{exact:!0,path:"/testators",component:Ea}),r.a.createElement(s.a,{exact:!0,path:"/places",component:ba}),r.a.createElement(s.a,{path:"/will",component:Ca}),r.a.createElement(s.a,{path:"/home",component:wa}),r.a.createElement(s.a,{exact:!0,path:"/login",component:Oe}),r.a.createElement(s.a,{exact:!0,path:"/espace",component:jn}),r.a.createElement(s.a,{exact:!0,path:"/espace/profile",component:ga}),r.a.createElement(s.a,{exact:!0,path:"/espace/panier",component:_n}),r.a.createElement(s.a,{exact:!0,path:"/espace/cms",component:gn}),r.a.createElement(s.a,{path:"/compare",component:xn})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(On,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[346,1,2]]]);
//# sourceMappingURL=main.6b0fb02b.chunk.js.map